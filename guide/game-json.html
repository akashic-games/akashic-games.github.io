<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162208211-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162208211-1');
</script>

<meta charset="UTF-8">
<meta name="viewport"    content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover">
<meta name="description" content="Akashic EngineはJavaScriptで動作する、無償利用が可能なマルチプラットフォーム対応ゲーム開発エンジンです">
<meta name="theme-color" content="#0F1F26">
<title>game.json の仕様</title>
<link rel="icon"       href="/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="stylesheet" href="/css/common.css?5ddd7a0">
<link rel="stylesheet" href="/css/header.css?5ddd7a0">
<link rel="stylesheet" href="/css/footer.css?5ddd7a0">


<link rel="stylesheet" href="/css/asset.css?5ddd7a0">

<link rel="stylesheet" href="/css/akashic-document.css?5ddd7a0">

<link rel="stylesheet" href="/css/railscasts.css?5ddd7a0">


<script src="/lib/jquery-3.2.1.min.js"></script>
<script src="/lib/common.js?5ddd7a0"></script>


<script src="/lib/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>

<div class="head--spacer"></div>
<div class="SP--head--menu--show"></div>
<div class="SP--head--menu--hide"></div>

<div class="head--menu--outer">
	<ul class="head--menu">
		<li class="head--menu--item">
			<p class="head--menu--item--tab"></p>
			<ul class="head--menu--item--list">
				<li><a href="/tutorial/v3/">Akashic Engine入門</a></li>
				<li><a href="/shin-ichiba/">ニコ生ゲームを作ろう</a></li>
				<!--li><a href="/tutorial/akashic-info.html">Akashic Engine関連情報一覧</a></li-->
			</ul>
		</li>
		<li class="head--menu--item">
			<p class="head--menu--item--tab"></p>
			<ul class="head--menu--item--list">
				<li><a href="/guide/akashic-cli.html">akashic-cli利用ガイド</a></li>
				<li><a href="/guide/game-json.html">game.jsonの仕様</a></li>
				<li><a href="/guide/asset-recommended-spec.html">素材の推奨仕様</a></li>
				<li><a href="/guide/composite-operation.html">CompositeOperationの利用</a></li>
				<li><a href="/guide/storage.html">ストレージについて</a></li>
				<li><a href="/guide/asset-load-error.html">アセットロードエラーについて</a></li>
				<li><a href="/guide/atsumaru.html">RPGアツマール投稿ガイド</a></li>
				<li><a href="/guide/template-guide.html">akashic initテンプレート利用ガイド</a></li>
				<li><a href="/guide/shader.html">シェーダの利用</a></li>
				<li><a href="/guide/shin-ichiba/index.html">ニコニコ生放送で遊べるゲームの作成</a></li>
				<li><a href="/guide/sandbox-config.html">sandbox.config.jsの仕様</a></li>
				<li><a href="/guide/bmpfont-generator.html">bmpfont-generator の仕様</a></li>
				<li><a href="/guide/common-pitfalls.html">よくある落とし穴</a></li>
			</ul>
		</li>
		<li class="head--menu--item"><a class="head--logo" href="/" title="ホーム"></a></li>
		<li class="head--menu--item">
			<p class="head--menu--item--tab"></p>
			<ul class="head--menu--item--list">
				<li><a href="/reference/akashic-engine-v3/globals.html">akashic-engine v3.x</a></li>
				<li><a href="/reference/akashic-timeline/">akashic-timeline</a></li>
				<li><a href="/reference/akashic-animation/">akashic-animation</a></li>
				<li><a href="/reference/akashic-label/">akashic-label</a></li>
				<li><a href="/reference/akashic-tile/">akashic-tile</a></li>
				<li><a href="/reference/akashic-box2d/">akashic-box2d</a></li>
				<li><a href="/reference/coe/">coe framework</a></li>
				<li><a href="/reference/raycaster-js/">raycaster-js</a></li>
				<li><a href="/reference/collision-js/">collision-js</a></li>
				<li><a href="/reference/akashic-engine-v2/modules/_lib_main_d_.g.html">akashic-engine v2.x (旧版)</a></li>
				<li><a href="/reference/akashic-engine-v1/modules/_lib_main_d_.g.html">akashic-engine v1.x (旧版)</a></li>
			</ul>
		</li>
		<li class="head--menu--item">
			<p class="head--menu--item--tab"></p>
			<ul class="head--menu--item--list">
				<li><a href="/demo/?title=helloworld">Hello World</a></li>
				<li><a href="/demo/?title=scale-rotate-opacity">拡縮・回転・透明度</a></li>
				<li><a href="/demo/?title=bitmap-font">ビットマップフォント</a></li>
				<li><a href="/demo/?title=framesprite">フレームアニメーション</a></li>
				<li><a href="/demo/?title=demo-touchevent">タッチイベント</a></li>
				<li><a href="/demo/?title=demo-tile">タイル</a></li>
				<li><a href="/demo/?title=label-sample">ラベル</a></li>
				<li><a href="/demo/?title=animation-showcase">アニメーション制御</a></li>
				<li><a href="/demo/?title=timeline-sample">トゥイーン制御</a></li>
				<li><a href="/demo/?title=simpleShot">アブストラクトシューティング</a></li>
				<li><a href="/demo/?title=HoppingWitch">HOPPING WITCH</a></li>
				<li><a href="/demo/?title=GalaxyWars">GALAXY WARS</a></li>
				<li><a href="/demo/?title=cannontv">いくぜ！ 超会議</a></li>
				<li><a href="/asset/material.html">サンプルデモの素材</a></li>
			</ul>
		</li>
	</ul>
</div>

<header id="akashic-page-header">
	<div class="SP--head--logo--box"><a class="head--logo" href="/" title="ホーム"></a></div>
</header>

<div id="BodyInner">
	<section class="akashic--document safearea--LR">
		<div class="inner responsive--width">
			<h1>game.json の仕様</h1>
<h2><a name="これは"></a> これは</h2>
<p>Akashic のゲームにおいてメタ情報などを取り扱う設定ファイル、game.json の仕様をまとめます。対象バージョンは akashic-engine&#64;1.11.2 以降です。</p>
<h2><a name="game.jsonとは"></a> game.json とは</h2>
<p>game.json は、Akashic のゲームのメタ情報などを取り扱う JSON 形式の設定ファイルです。主に以下のような情報を取り扱います。</p>
<ul>
<li>ゲーム画面のサイズ</li>
<li>ゲームの FPS</li>
<li>ゲーム内で利用する各種素材のファイルパスや ID</li>
</ul>
<p>これらに加えて、画像素材のサイズのような補助的な情報も取り扱います。</p>
<p>各種素材(アセット)のファイルパスや画像のサイズなどは、手動で記述・維持しにくいので、
game.json を生成・管理するツールとして akashic-cli が提供されています。
akashic-cli の詳細は <a href="akashic-cli.html">akashic-cli 利用ガイド</a> を参照してください。</p>
<h2><a name="形式"></a> 形式</h2>
<p>妥当な game.json の内容は一つのオブジェクトです。それは以下の名前のプロパティと、対応する値を持ちます。</p>
<ul>
<li>width (必須)<ul>
<li>数値</li>
<li>画面の幅 (ピクセル)</li>
</ul>
</li>
<li>heigth (必須)<ul>
<li>数値</li>
<li>画面の高さ (ピクセル)</li>
</ul>
</li>
<li>fps (必須)<ul>
<li>数値</li>
<li>ゲームの FPS (秒間フレーム数)</li>
</ul>
</li>
<li>assets (必須)<ul>
<li>オブジェクト (詳細は後述)</li>
<li>ゲーム内で利用するアセットの定義</li>
</ul>
</li>
<li>main (指定推奨)<ul>
<li>文字列</li>
<li>エントリポイントのスクリプトへのパス</li>
</ul>
</li>
<li>globalScripts<ul>
<li>配列 (詳細は後述)</li>
<li>ゲーム内で利用するスクリプトアセット定義の短縮表記</li>
</ul>
</li>
<li>renderers<ul>
<li>配列（詳細は後述）</li>
<li>ゲームが利用するレンダラーを定義</li>
</ul>
</li>
<li>defaultLoadingScene<ul>
<li>文字列 (詳細は後述)</li>
<li>デフォルトのローディングシーンを定義</li>
</ul>
</li>
<li>environment<ul>
<li>オブジェクト (詳細は後述)</li>
<li>このゲームの実行環境に要求する条件</li>
</ul>
</li>
</ul>
<p>次の JSON は、妥当な game.json の一例です:</p>
<pre><code class="language-json">{
  &quot;width&quot;: 320,
  &quot;height&quot;: 240,
  &quot;fps&quot;: 30,
  &quot;assets&quot;: {
    &quot;main&quot;: {
      &quot;type&quot;: &quot;script&quot;,
      &quot;path&quot;: &quot;script/main.js&quot;,
      &quot;global&quot;: true
    }
  },
  &quot;main&quot;: &quot;./script/main.js&quot;
}</code></pre>
<p>この game.json は、画面サイズが 320x240 で FPS が 30 の、
&quot;script/main.js&quot; というゲームスクリプト一つだけを使うゲームであること、またエントリポイントはその &quot;./script/main.js&quot; であることを定義しています。</p>
<h3>assets (アセット定義)</h3>
<p>game.json のオブジェクト中、 <strong>assets</strong> の値は、オブジェクトでなければなりません。そのオブジェクトの各キーはアセット ID、値はその ID のアセット定義です。</p>
<p><strong>アセット ID</strong> は、ゲーム開発者が任意に設定できる文字列です。アセット ID は「半角英数字、アンダースコア &quot;_&quot;、ドル記号 &quot;$&quot;」のみで構成され、かつ「英字で始まっている」必要があります。あるシーンで読み込んだアセットは <code>g.Scene#assets</code> オブジェクトから参照できます。アセット ID はこのオブジェクトのキーとして利用されます。すなわち、アセット ID が &quot;foo&quot; のアセットは、<code>scene.assets[&quot;foo&quot;]</code> のような形で参照することができます。</p>
<p><strong>アセット定義</strong> は、オブジェクトであり、少なくとも以下の値を持つことができます:</p>
<ul>
<li>type (必須)<ul>
<li>次の文字列のいずれか: &quot;image&quot;, &quot;audio&quot;, &quot;text&quot;, &quot;script&quot;</li>
<li>アセットの種類</li>
</ul>
</li>
<li>path (必須)<ul>
<li>文字列</li>
<li>game.json のあるディレクトリからの相対パス (スラッシュ区切り)</li>
<li>アセットを表すファイル</li>
</ul>
</li>
<li>global<ul>
<li>真理値</li>
<li>グローバルアセットであるか否か (省略された場合、偽)</li>
</ul>
</li>
</ul>
<p>global の値が真に設定されたアセットは、<strong>グローバルアセット</strong> になります。通常のアセットは、シーン単位で管理されます。アセットを利用する場合、<code>g.Scene</code> のコンストラクタでそのアセット ID を指定する必要があります。しかしグローバルアセットは、シーン単位ではなく、ゲーム内において常に利用可能なアセットになります。通常のアセットが <code>g.Scene#assets</code> から参照できるのに対して、グローバルアセットは <code>g.Game#assets</code> から参照できます。</p>
<p>(なお Akashic Engine v3 以降では、より柔軟な API を提供する <code>g.Scene#asset</code> (s がないことに注意) 経由でもアセットを参照できます)</p>
<p>type の値によっては、アセット定義にさらに追加の制約や必須プロパティが存在します。</p>
<ul>
<li>&quot;image&quot;<ul>
<li>プロパティ: width (必須)<ul>
<li>数値</li>
<li>画像の幅(ピクセル)</li>
</ul>
</li>
<li>プロパティ: height (必須)<ul>
<li>数値</li>
<li>画像の高さ(ピクセル)</li>
</ul>
</li>
<li>制約: path の拡張子は &quot;.png&quot;、&quot;.jpg&quot; または &quot;.jpeg&quot; でなければならない</li>
</ul>
</li>
<li>&quot;audio&quot;<ul>
<li>プロパティ: systemId<ul>
<li>文字列</li>
<li>このアセットの system (本文書では詳細割愛)</li>
<li>省略された場合、 <code>g.Game#defaultAudioSystemId</code> の値 (<code>defaultAudioSystemId</code> の初期値は &quot;sound&quot;)</li>
</ul>
</li>
<li>制約: path はファイルのパス文字列から拡張子を取り除いたものでなければならない</li>
<li>制約: 対応するファイルの拡張子は &quot;.ogg&quot; または &quot;.aac&quot; でなければならない</li>
</ul>
</li>
<li>&quot;script&quot;<ul>
<li>制約: path の拡張子は &quot;.js&quot; でなければならない</li>
</ul>
</li>
</ul>
<p>オーディオアセット (type が &quot;audio&quot; であるアセット) は他と異なり、ファイルパスに拡張子を書かないことに気をつけて下さい。音素材に関して、拡張子以外の部分が同名のファイル (e.g. &quot;audio/foo.ogg&quot; と
&quot;audio/foo.aac&quot; など) は、それぞれ同じ内容であることが期待されます。これらはエンジンが、ゲームの各実行環境で再生可能な形式のファイルを自動的に選択して再生するためです。</p>
<h3>main</h3>
<p>akashic-engine&#64;1.2.0 で導入。</p>
<p><strong>main</strong> は、ゲームのエントリポイントとなるスクリプト( <strong>main スクリプト</strong> )を指定する値です。</p>
<p>指定されたスクリプトは、アセット定義 (assets) でグローバルなスクリプトアセットとして定義されていなければなりません。エンジンはグローバルアセットの読み込み後、この値で require() を呼び出し、その戻り値をエントリポイントとみなして実行します。
(require() する関係上、アセット定義の path と異なり、相対パスは &quot;./&quot; で始める必要がある点に気をつけて下さい。)</p>
<p>main スクリプトは、次の仕様を満たす関数をエクスポートする必要があります。</p>
<ul>
<li>引数 <code>param: g.GameMainParameterObject</code> を受け取り、値を返さない (<code>(param: g.GameMainParameterObject) =&gt; void</code>)</li>
<li>呼び出された時、 <code>g.Game#pushScene()</code> によるシーンの追加など、ゲームの初期化処理を行う</li>
</ul>
<p>akashic-engine&#64;1.1.2 以前では、このフィールドは存在しませんでした。エンジンは後方互換性のため、 <code>main</code> が指定されていない場合には、以下のような内容の main スクリプトが与えられたかのように振る舞います。</p>
<pre><code class="language-js">module.exports = function(param) {
  if (!param.snapshot) {
    var mainSceneFun = require(&quot;mainScene&quot;);
    g.game.pushScene(mainSceneFun());
  } else {
    var snapshotLoader = require(&quot;snapshotLoader&quot;);
    snapshotLoader(param.snapshot);
  }
};</code></pre>
<p>この場合、assets は少なくとも &quot;mainScene&quot; という名前のキーを持つ必要があります。アセット ID &quot;mainScene&quot; を持つアセットは、type が &quot;script&quot; で global は true、すなわちグローバルなスクリプトアセットでなければなりません。</p>
<p>(上の例では require()にアセット ID を渡していることに気をつけてください。
akashic-engine の提供する require()は、Node.js などのそれと異なり、game.json に存在するアセット ID を(優先的に)解決します。これは歴史的経緯によるものです。上の例では説明のために使っていますが、この動作の利用は非推奨です。)</p>
<h3>globalScripts</h3>
<p>akashic-engine&#64;0.1.0 で導入。</p>
<p><strong>globalScripts</strong> は、スクリプトアセットの短縮記法です。これは akashic install/uninstall のために用意された値です。通常ゲーム開発者が編集する必要はありません。</p>
<p>存在する場合、globalScripts はファイルパスの配列でなければなりません。ファイルパスは game.json のあるディレクトリからの相対パスで、拡張子が &quot;.js&quot; または &quot;.json&quot; である必要があります。</p>
<p>ここに書かれたファイルパスは、アセット ID を持たないグローバルなスクリプトアセット (&quot;.js&quot; の場合)
またはテキストアセット (&quot;.json&quot; の場合) として読み込まれます。
(アセット ID を持たないアセットは通常、定義も利用もできませんが、スクリプトアセットおよび JSON であるテキストアセットに限っては
<code>require()</code> によってファイルパスで参照することができます)</p>
<h3>renderers</h3>
<p>akashic-engine&#64;1.0.3 で導入。</p>
<p><strong>renderers</strong> は、ゲームで利用するレンダラーを指定するためのリストであり、レンダラーを識別する文字列であるレンダラー識別子の配列である必要があります。</p>
<p>レンダラー識別子はサービスや実行環境により異なります。</p>
<p>Akashic エンジンは、レンダラー識別子に該当するレンダラーをリストの先頭から順に探索します。利用可能なレンダラーが見つかると、そのレンダラーを利用して描画を行います。</p>
<p>例えば、 <code>canvas</code> と <code>webgl</code> という 2 つのレンダラー識別子が利用可能な環境において、
<code>webgl</code> を優先して使いたい場合は、<code>&quot;renderers&quot;: [&quot;webgl&quot;, &quot;canvas&quot;]</code> と記述します。</p>
<p>レンダラー識別子として<code>&quot;auto&quot;</code> を指定した場合は、Akashic エンジンが自動的にレンダラーを決定します。また、game.json に renderers を定義しなかった場合の挙動は <code>&quot;renderers&quot;: [&quot;auto&quot;]</code> を指定した場合と等価になります。</p>
<h3><a name="defaultLoadingScene" class="anchor"></a>defaultLoadingScene</h3>
<p><strong>defaultLoadingScene</strong> は、グローバルアセット読み込み中のローディングシーンなど、デフォルトのローディングシーンについての設定です。
akashic-engine&#64;1.11.2 では <code>&quot;default&quot;</code> または <code>&quot;none&quot;</code> を指定できます。
<code>&quot;default&quot;</code> を指定または省略時はエンジンに用意されているデフォルトのローディングシーンを表示します。
<code>&quot;none&quot;</code> を指定するとそれらのローディングシーンを非表示にできます。</p>
<p>akashic-engine&#64;3.0.0 で <code>&quot;compact&quot;</code> が導入されました。
<code>&quot;compact&quot;</code> を指定すると背景が透過になり、プログレスバーが画面中央ではなく右下の方に小さく表示されます。</p>
<h3>environment</h3>
<p>akashic-engine&#64;2.0.0 で導入。</p>
<p><strong>environment</strong> は、ゲームを実行する環境やエンジンに対する要求を指定するためのオブジェクトです。オブジェクトのキーは要求の種類、値は要求内容です(必要なバージョンなど)。</p>
<p>次の値が利用できます。</p>
<div class="table--scroll">
<table>
<thead>
<tr>
<th>キー</th>
<th>値</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"sandbox-runtime"</code></td>
<td><code>"1"</code> または <code>"2"</code> (文字列)</td>
<td>akashic-sandbox でゲームを実行する際、実行するエンジンのバージョンを決定するために利用されます。 akashic-engine&#64;2.0.0 以降で作成しているゲームの場合、 `"2"` を指定してください。省略された場合、 `"1"` として解釈されます。</td>
</tr>
<tr>
<td><code>"niconico"</code></td>
<td>オブジェクト</td>
<td>ニコニコ生放送上で利用できるように登録する場合に参照される設定。詳細は <a href="/guide/shin-ichiba/">ニコニコ生放送上で遊べるゲームの作成</a> を参照してください。</td>
</tr>
</tbody>
</table>
</div>

<pre><code class="language-json">  &quot;environment&quot;: {
    &quot;sandbox-runtime&quot;: &quot;2&quot;
  }</code></pre>
<p><code>&quot;sandbox-runtime&quot;</code> の値は、 <code>akashic export html</code> でエンジンをバンドルした HTML を出力する際にも参照されます。</p>
<h2><a name="game.jsonの例"></a> game.json の例</h2>
<p>妥当な game.json の一例を示します。</p>
<pre><code class="language-json">{
  &quot;width&quot;: 320,
  &quot;height&quot;: 320,
  &quot;fps&quot;: 30,
  &quot;main&quot;: &quot;./script/main.js&quot;,
  &quot;assets&quot;: {
    &quot;main&quot;: {
      &quot;type&quot;: &quot;script&quot;,
      &quot;path&quot;: &quot;script/main.js&quot;,
      &quot;global&quot;: true
    },
    &quot;character&quot;: {
      &quot;type&quot;: &quot;image&quot;,
      &quot;path&quot;: &quot;image/character.png&quot;,
      &quot;width&quot;: 32,
      &quot;height&quot;: 32
    },
    &quot;background&quot;: {
      &quot;type&quot;: &quot;image&quot;,
      &quot;path&quot;: &quot;image/background.jpg&quot;,
      &quot;width&quot;: 320,
      &quot;height&quot;: 320
    },
    &quot;bgm&quot;: {
      &quot;type&quot;: &quot;audio&quot;,
      &quot;path&quot;: &quot;audio/bgm&quot;
    }
  },
  &quot;globalScripts&quot;: [
    &quot;node_modules/@akashic-extension/akashic-timeline/lib/Easing.js&quot;,
    &quot;node_modules/@akashic-extension/akashic-timeline/lib/Timeline.js&quot;,
    &quot;node_modules/@akashic-extension/akashic-timeline/lib/Tween.js&quot;,
    &quot;node_modules/@akashic-extension/akashic-timeline/lib/index.js&quot;,
    &quot;node_modules/@akashic-extension/akashic-timeline/package.json&quot;
  ]
}</code></pre>

		</div>
	</section>
	<footer class="safearea--LR">
	<div class="responsive--width">

		<ul class="foot--creativecommons">
			<li class="foot--creativecommons--ban"><a href="http://creativecommons.org/licenses/by/2.1/jp/" target="_blank"><img alt="クリエイティブ・コモンズ・ライセンス" src="https://i.creativecommons.org/l/by/2.1/jp/80x15.png"></a></li>
			<li class="foot--creativecommons--txt">このサイトの画像は、一部を除き <a rel="license" href="http://creativecommons.org/licenses/by/2.1/jp/" target="_blank">クリエイティブ・コモンズ 表示 2.1 日本 ライセンス</a><br>の下に提供されています: <a href="/image-license.html">詳細</a></li>
		</ul>

		<ul class="foot--license">
			<li class="foot--license--akashic"><a href="https://akashic-games.github.io"></a></li>
			<li class="foot--license--dwango"><a href="http://dwango.co.jp" target="_blank">&copy; dwango</a></li>
		</ul>

	</div>
</footer>

</div>
<div class="page--top"></div>
<div class="window--dark"></div>

<script>
	// リサイズ時にコンテンツのリサイズができない状態なので暫定対応でコンテンツをリロードしている
	// TODO: リサイズ時にコンテンツも追従する仕組みを作成する
	window.addEventListener('resize', function() {
		var iframes = document.getElementsByClassName('akashic-content');
		var contents = Array.prototype.slice.call(iframes);
		contents.forEach(function(content) {
			content.contentWindow.location.reload(true);
		});
	});
</script>
</body>
</html>
