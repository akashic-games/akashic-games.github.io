import{d as Nt,c as Zt,l as Wt,o as Mt,_ as Ht,C as _t,D as Gt,z as At,h as Rt,y as Vt}from"./index-b3568867.js";const Kt=Nt({__name:"BaseButton",props:{onClick:{type:Function}},setup(Y){return(I,o)=>(Mt(),Zt("button",{class:"button-container",onClick:o[0]||(o[0]=(...A)=>I.onClick&&I.onClick(...A))},[Wt(I.$slots,"default",{},void 0,!0)]))}});const se=Ht(Kt,[["__scopeId","data-v-ec345b5f"],["__file","BaseButton.vue"]]);function pt(Y){if(typeof Y!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(Y))}function Bt(Y,I){for(var o="",A=0,_=-1,l=0,i,r=0;r<=Y.length;++r){if(r<Y.length)i=Y.charCodeAt(r);else{if(i===47)break;i=47}if(i===47){if(!(_===r-1||l===1))if(_!==r-1&&l===2){if(o.length<2||A!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var c=o.lastIndexOf("/");if(c!==o.length-1){c===-1?(o="",A=0):(o=o.slice(0,c),A=o.length-1-o.lastIndexOf("/")),_=r,l=0;continue}}else if(o.length===2||o.length===1){o="",A=0,_=r,l=0;continue}}I&&(o.length>0?o+="/..":o="..",A=2)}else o.length>0?o+="/"+Y.slice(_+1,r):o=Y.slice(_+1,r),A=r-_-1;_=r,l=0}else i===46&&l!==-1?++l:l=-1}return o}function Yt(Y,I){var o=I.dir||I.root,A=I.base||(I.name||"")+(I.ext||"");return o?o===I.root?o+A:o+Y+A:A}var vt={resolve:function(){for(var I="",o=!1,A,_=arguments.length-1;_>=-1&&!o;_--){var l;_>=0?l=arguments[_]:(A===void 0&&(A=process.cwd()),l=A),pt(l),l.length!==0&&(I=l+"/"+I,o=l.charCodeAt(0)===47)}return I=Bt(I,!o),o?I.length>0?"/"+I:"/":I.length>0?I:"."},normalize:function(I){if(pt(I),I.length===0)return".";var o=I.charCodeAt(0)===47,A=I.charCodeAt(I.length-1)===47;return I=Bt(I,!o),I.length===0&&!o&&(I="."),I.length>0&&A&&(I+="/"),o?"/"+I:I},isAbsolute:function(I){return pt(I),I.length>0&&I.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var I,o=0;o<arguments.length;++o){var A=arguments[o];pt(A),A.length>0&&(I===void 0?I=A:I+="/"+A)}return I===void 0?".":vt.normalize(I)},relative:function(I,o){if(pt(I),pt(o),I===o||(I=vt.resolve(I),o=vt.resolve(o),I===o))return"";for(var A=1;A<I.length&&I.charCodeAt(A)===47;++A);for(var _=I.length,l=_-A,i=1;i<o.length&&o.charCodeAt(i)===47;++i);for(var r=o.length,c=r-i,g=l<c?l:c,d=-1,a=0;a<=g;++a){if(a===g){if(c>g){if(o.charCodeAt(i+a)===47)return o.slice(i+a+1);if(a===0)return o.slice(i+a)}else l>g&&(I.charCodeAt(A+a)===47?d=a:a===0&&(d=0));break}var f=I.charCodeAt(A+a),s=o.charCodeAt(i+a);if(f!==s)break;f===47&&(d=a)}var u="";for(a=A+d+1;a<=_;++a)(a===_||I.charCodeAt(a)===47)&&(u.length===0?u+="..":u+="/..");return u.length>0?u+o.slice(i+d):(i+=d,o.charCodeAt(i)===47&&++i,o.slice(i))},_makeLong:function(I){return I},dirname:function(I){if(pt(I),I.length===0)return".";for(var o=I.charCodeAt(0),A=o===47,_=-1,l=!0,i=I.length-1;i>=1;--i)if(o=I.charCodeAt(i),o===47){if(!l){_=i;break}}else l=!1;return _===-1?A?"/":".":A&&_===1?"//":I.slice(0,_)},basename:function(I,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');pt(I);var A=0,_=-1,l=!0,i;if(o!==void 0&&o.length>0&&o.length<=I.length){if(o.length===I.length&&o===I)return"";var r=o.length-1,c=-1;for(i=I.length-1;i>=0;--i){var g=I.charCodeAt(i);if(g===47){if(!l){A=i+1;break}}else c===-1&&(l=!1,c=i+1),r>=0&&(g===o.charCodeAt(r)?--r===-1&&(_=i):(r=-1,_=c))}return A===_?_=c:_===-1&&(_=I.length),I.slice(A,_)}else{for(i=I.length-1;i>=0;--i)if(I.charCodeAt(i)===47){if(!l){A=i+1;break}}else _===-1&&(l=!1,_=i+1);return _===-1?"":I.slice(A,_)}},extname:function(I){pt(I);for(var o=-1,A=0,_=-1,l=!0,i=0,r=I.length-1;r>=0;--r){var c=I.charCodeAt(r);if(c===47){if(!l){A=r+1;break}continue}_===-1&&(l=!1,_=r+1),c===46?o===-1?o=r:i!==1&&(i=1):o!==-1&&(i=-1)}return o===-1||_===-1||i===0||i===1&&o===_-1&&o===A+1?"":I.slice(o,_)},format:function(I){if(I===null||typeof I!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof I);return Yt("/",I)},parse:function(I){pt(I);var o={root:"",dir:"",base:"",ext:"",name:""};if(I.length===0)return o;var A=I.charCodeAt(0),_=A===47,l;_?(o.root="/",l=1):l=0;for(var i=-1,r=0,c=-1,g=!0,d=I.length-1,a=0;d>=l;--d){if(A=I.charCodeAt(d),A===47){if(!g){r=d+1;break}continue}c===-1&&(g=!1,c=d+1),A===46?i===-1?i=d:a!==1&&(a=1):i!==-1&&(a=-1)}return i===-1||c===-1||a===0||a===1&&i===c-1&&i===r+1?c!==-1&&(r===0&&_?o.base=o.name=I.slice(1,c):o.base=o.name=I.slice(r,c)):(r===0&&_?(o.name=I.slice(1,i),o.base=I.slice(1,c)):(o.name=I.slice(r,i),o.base=I.slice(r,c)),o.ext=I.slice(i,c)),r>0?o.dir=I.slice(0,r-1):_&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};vt.posix=vt;var gt=vt,Ft={exports:{}};(function(Y,I){(function(o,A){A()})(_t,function(){function o(g,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function A(g,d,a){var f=new XMLHttpRequest;f.open("GET",g),f.responseType="blob",f.onload=function(){c(f.response,d,a)},f.onerror=function(){console.error("could not download file")},f.send()}function _(g){var d=new XMLHttpRequest;d.open("HEAD",g,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function l(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(d)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _t=="object"&&_t.global===_t?_t:void 0,r=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(g,d,a){var f=i.URL||i.webkitURL,s=document.createElement("a");d=d||g.name||"download",s.download=d,s.rel="noopener",typeof g=="string"?(s.href=g,s.origin===location.origin?l(s):_(s.href)?A(g,d,a):l(s,s.target="_blank")):(s.href=f.createObjectURL(g),setTimeout(function(){f.revokeObjectURL(s.href)},4e4),setTimeout(function(){l(s)},0))}:"msSaveOrOpenBlob"in navigator?function(g,d,a){if(d=d||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(o(g,a),d);else if(_(g))A(g,d,a);else{var f=document.createElement("a");f.href=g,f.target="_blank",setTimeout(function(){l(f)})}}:function(g,d,a,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof g=="string")return A(g,d,a);var s=g.type==="application/octet-stream",u=/constructor/i.test(i.HTMLElement)||i.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent);if((n||s&&u||r)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var y=p.result;y=n?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=y:location=y,f=null},p.readAsDataURL(g)}else{var h=i.URL||i.webkitURL,b=h.createObjectURL(g);f?f.location=b:location.href=b,f=null,setTimeout(function(){h.revokeObjectURL(b)},4e4)}});i.saveAs=c.saveAs=c,Y.exports=c})})(Ft);var Xt=Ft.exports;function St(Y){throw new Error('Could not dynamically require "'+Y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(Y,I){(function(o){Y.exports=o()})(function(){return function o(A,_,l){function i(g,d){if(!_[g]){if(!A[g]){var a=typeof St=="function"&&St;if(!d&&a)return a(g,!0);if(r)return r(g,!0);var f=new Error("Cannot find module '"+g+"'");throw f.code="MODULE_NOT_FOUND",f}var s=_[g]={exports:{}};A[g][0].call(s.exports,function(u){var n=A[g][1][u];return i(n||u)},s,s.exports,o,A,_,l)}return _[g].exports}for(var r=typeof St=="function"&&St,c=0;c<l.length;c++)i(l[c]);return i}({1:[function(o,A,_){var l=o("./utils"),i=o("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";_.encode=function(c){for(var g,d,a,f,s,u,n,p=[],h=0,b=c.length,y=b,S=l.getTypeOf(c)!=="string";h<c.length;)y=b-h,a=S?(g=c[h++],d=h<b?c[h++]:0,h<b?c[h++]:0):(g=c.charCodeAt(h++),d=h<b?c.charCodeAt(h++):0,h<b?c.charCodeAt(h++):0),f=g>>2,s=(3&g)<<4|d>>4,u=1<y?(15&d)<<2|a>>6:64,n=2<y?63&a:64,p.push(r.charAt(f)+r.charAt(s)+r.charAt(u)+r.charAt(n));return p.join("")},_.decode=function(c){var g,d,a,f,s,u,n=0,p=0,h="data:";if(c.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var b,y=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===r.charAt(64)&&y--,c.charAt(c.length-2)===r.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=i.uint8array?new Uint8Array(0|y):new Array(0|y);n<c.length;)g=r.indexOf(c.charAt(n++))<<2|(f=r.indexOf(c.charAt(n++)))>>4,d=(15&f)<<4|(s=r.indexOf(c.charAt(n++)))>>2,a=(3&s)<<6|(u=r.indexOf(c.charAt(n++))),b[p++]=g,s!==64&&(b[p++]=d),u!==64&&(b[p++]=a);return b}},{"./support":30,"./utils":32}],2:[function(o,A,_){var l=o("./external"),i=o("./stream/DataWorker"),r=o("./stream/Crc32Probe"),c=o("./stream/DataLengthProbe");function g(d,a,f,s,u){this.compressedSize=d,this.uncompressedSize=a,this.crc32=f,this.compression=s,this.compressedContent=u}g.prototype={getContentWorker:function(){var d=new i(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),a=this;return d.on("end",function(){if(this.streamInfo.data_length!==a.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new i(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(d,a,f){return d.pipe(new r).pipe(new c("uncompressedSize")).pipe(a.compressWorker(f)).pipe(new c("compressedSize")).withStreamInfo("compression",a)},A.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,A,_){var l=o("./stream/GenericWorker");_.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},_.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,A,_){var l=o("./utils"),i=function(){for(var r,c=[],g=0;g<256;g++){r=g;for(var d=0;d<8;d++)r=1&r?3988292384^r>>>1:r>>>1;c[g]=r}return c}();A.exports=function(r,c){return r!==void 0&&r.length?l.getTypeOf(r)!=="string"?function(g,d,a,f){var s=i,u=f+a;g^=-1;for(var n=f;n<u;n++)g=g>>>8^s[255&(g^d[n])];return-1^g}(0|c,r,r.length,0):function(g,d,a,f){var s=i,u=f+a;g^=-1;for(var n=f;n<u;n++)g=g>>>8^s[255&(g^d.charCodeAt(n))];return-1^g}(0|c,r,r.length,0):0}},{"./utils":32}],5:[function(o,A,_){_.base64=!1,_.binary=!1,_.dir=!1,_.createFolders=!0,_.date=null,_.compression=null,_.compressionOptions=null,_.comment=null,_.unixPermissions=null,_.dosPermissions=null},{}],6:[function(o,A,_){var l=null;l=typeof Promise<"u"?Promise:o("lie"),A.exports={Promise:l}},{lie:37}],7:[function(o,A,_){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=o("pako"),r=o("./utils"),c=o("./stream/GenericWorker"),g=l?"uint8array":"array";function d(a,f){c.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=f,this.meta={}}_.magic="\b\0",r.inherits(d,c),d.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(g,a.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(f){a.push({data:f,meta:a.meta})}},_.compressWorker=function(a){return new d("Deflate",a)},_.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,A,_){function l(s,u){var n,p="";for(n=0;n<u;n++)p+=String.fromCharCode(255&s),s>>>=8;return p}function i(s,u,n,p,h,b){var y,S,x=s.file,U=s.compression,O=b!==g.utf8encode,N=r.transformTo("string",b(x.name)),B=r.transformTo("string",g.utf8encode(x.name)),H=x.comment,$=r.transformTo("string",b(H)),w=r.transformTo("string",g.utf8encode(H)),R=B.length!==x.name.length,e=w.length!==H.length,D="",J="",P="",tt=x.dir,Z=x.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};u&&!n||(Q.crc32=s.crc32,Q.compressedSize=s.compressedSize,Q.uncompressedSize=s.uncompressedSize);var z=0;u&&(z|=8),O||!R&&!e||(z|=2048);var E=0,q=0;tt&&(E|=16),h==="UNIX"?(q=798,E|=function(G,st){var ut=G;return G||(ut=st?16893:33204),(65535&ut)<<16}(x.unixPermissions,tt)):(q=20,E|=function(G){return 63&(G||0)}(x.dosPermissions)),y=Z.getUTCHours(),y<<=6,y|=Z.getUTCMinutes(),y<<=5,y|=Z.getUTCSeconds()/2,S=Z.getUTCFullYear()-1980,S<<=4,S|=Z.getUTCMonth()+1,S<<=5,S|=Z.getUTCDate(),R&&(J=l(1,1)+l(d(N),4)+B,D+="up"+l(J.length,2)+J),e&&(P=l(1,1)+l(d($),4)+w,D+="uc"+l(P.length,2)+P);var V="";return V+=`
\0`,V+=l(z,2),V+=U.magic,V+=l(y,2),V+=l(S,2),V+=l(Q.crc32,4),V+=l(Q.compressedSize,4),V+=l(Q.uncompressedSize,4),V+=l(N.length,2),V+=l(D.length,2),{fileRecord:a.LOCAL_FILE_HEADER+V+N+D,dirRecord:a.CENTRAL_FILE_HEADER+l(q,2)+V+l($.length,2)+"\0\0\0\0"+l(E,4)+l(p,4)+N+D+$}}var r=o("../utils"),c=o("../stream/GenericWorker"),g=o("../utf8"),d=o("../crc32"),a=o("../signature");function f(s,u,n,p){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=u,this.zipPlatform=n,this.encodeFileName=p,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(f,c),f.prototype.push=function(s){var u=s.meta.percent||0,n=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,c.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:n?(u+100*(n-p-1))/n:100}}))},f.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var u=this.streamFiles&&!s.file.dir;if(u){var n=i(s,u,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(s){this.accumulate=!1;var u=this.streamFiles&&!s.file.dir,n=i(s,u,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),u)this.push({data:function(p){return a.DATA_DESCRIPTOR+l(p.crc32,4)+l(p.compressedSize,4)+l(p.uncompressedSize,4)}(s),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var s=this.bytesWritten,u=0;u<this.dirRecords.length;u++)this.push({data:this.dirRecords[u],meta:{percent:100}});var n=this.bytesWritten-s,p=function(h,b,y,S,x){var U=r.transformTo("string",x(S));return a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(h,2)+l(h,2)+l(b,4)+l(y,4)+l(U.length,2)+U}(this.dirRecords.length,n,s,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(s){this._sources.push(s);var u=this;return s.on("data",function(n){u.processChunk(n)}),s.on("end",function(){u.closedSource(u.previous.streamInfo),u._sources.length?u.prepareNextSource():u.end()}),s.on("error",function(n){u.error(n)}),this},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(s){var u=this._sources;if(!c.prototype.error.call(this,s))return!1;for(var n=0;n<u.length;n++)try{u[n].error(s)}catch{}return!0},f.prototype.lock=function(){c.prototype.lock.call(this);for(var s=this._sources,u=0;u<s.length;u++)s[u].lock()},A.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,A,_){var l=o("../compressions"),i=o("./ZipFileWorker");_.generateWorker=function(r,c,g){var d=new i(c.streamFiles,g,c.platform,c.encodeFileName),a=0;try{r.forEach(function(f,s){a++;var u=function(b,y){var S=b||y,x=l[S];if(!x)throw new Error(S+" is not a valid compression method !");return x}(s.options.compression,c.compression),n=s.options.compressionOptions||c.compressionOptions||{},p=s.dir,h=s.date;s._compressWorker(u,n).withStreamInfo("file",{name:f,dir:p,date:h,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(d)}),d.entriesCount=a}catch(f){d.error(f)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,A,_){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new l;for(var r in this)typeof this[r]!="function"&&(i[r]=this[r]);return i}}(l.prototype=o("./object")).loadAsync=o("./load"),l.support=o("./support"),l.defaults=o("./defaults"),l.version="3.10.1",l.loadAsync=function(i,r){return new l().loadAsync(i,r)},l.external=o("./external"),A.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,A,_){var l=o("./utils"),i=o("./external"),r=o("./utf8"),c=o("./zipEntries"),g=o("./stream/Crc32Probe"),d=o("./nodejsUtils");function a(f){return new i.Promise(function(s,u){var n=f.decompressed.getContentWorker().pipe(new g);n.on("error",function(p){u(p)}).on("end",function(){n.streamInfo.crc32!==f.decompressed.crc32?u(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}A.exports=function(f,s){var u=this;return s=l.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),d.isNode&&d.isStream(f)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",f,!0,s.optimizedBinaryString,s.base64).then(function(n){var p=new c(s);return p.load(n),p}).then(function(n){var p=[i.Promise.resolve(n)],h=n.files;if(s.checkCRC32)for(var b=0;b<h.length;b++)p.push(a(h[b]));return i.Promise.all(p)}).then(function(n){for(var p=n.shift(),h=p.files,b=0;b<h.length;b++){var y=h[b],S=y.fileNameStr,x=l.resolve(y.fileNameStr);u.file(x,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:s.createFolders}),y.dir||(u.file(x).unsafeOriginalName=S)}return p.zipComment.length&&(u.comment=p.zipComment),u})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,A,_){var l=o("../utils"),i=o("../stream/GenericWorker");function r(c,g){i.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(g)}l.inherits(r,i),r.prototype._bindStream=function(c){var g=this;(this._stream=c).pause(),c.on("data",function(d){g.push({data:d,meta:{percent:0}})}).on("error",function(d){g.isPaused?this.generatedError=d:g.error(d)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},r.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},A.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,A,_){var l=o("readable-stream").Readable;function i(r,c,g){l.call(this,c),this._helper=r;var d=this;r.on("data",function(a,f){d.push(a)||d._helper.pause(),g&&g(f)}).on("error",function(a){d.emit("error",a)}).on("end",function(){d.push(null)})}o("../utils").inherits(i,l),i.prototype._read=function(){this._helper.resume()},A.exports=i},{"../utils":32,"readable-stream":16}],14:[function(o,A,_){A.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,i);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,i)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var i=new Buffer(l);return i.fill(0),i},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(o,A,_){function l(x,U,O){var N,B=r.getTypeOf(U),H=r.extend(O||{},d);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(x=h(x)),H.createFolders&&(N=p(x))&&b.call(this,N,!0);var $=B==="string"&&H.binary===!1&&H.base64===!1;O&&O.binary!==void 0||(H.binary=!$),(U instanceof a&&U.uncompressedSize===0||H.dir||!U||U.length===0)&&(H.base64=!1,H.binary=!0,U="",H.compression="STORE",B="string");var w=null;w=U instanceof a||U instanceof c?U:u.isNode&&u.isStream(U)?new n(x,U):r.prepareContent(x,U,H.binary,H.optimizedBinaryString,H.base64);var R=new f(x,w,H);this.files[x]=R}var i=o("./utf8"),r=o("./utils"),c=o("./stream/GenericWorker"),g=o("./stream/StreamHelper"),d=o("./defaults"),a=o("./compressedObject"),f=o("./zipObject"),s=o("./generate"),u=o("./nodejsUtils"),n=o("./nodejs/NodejsStreamInputAdapter"),p=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var U=x.lastIndexOf("/");return 0<U?x.substring(0,U):""},h=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},b=function(x,U){return U=U!==void 0?U:d.createFolders,x=h(x),this.files[x]||l.call(this,x,null,{dir:!0,createFolders:U}),this.files[x]};function y(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var U,O,N;for(U in this.files)N=this.files[U],(O=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&x(O,N)},filter:function(x){var U=[];return this.forEach(function(O,N){x(O,N)&&U.push(N)}),U},file:function(x,U,O){if(arguments.length!==1)return x=this.root+x,l.call(this,x,U,O),this;if(y(x)){var N=x;return this.filter(function(H,$){return!$.dir&&N.test(H)})}var B=this.files[this.root+x];return B&&!B.dir?B:null},folder:function(x){if(!x)return this;if(y(x))return this.filter(function(B,H){return H.dir&&x.test(B)});var U=this.root+x,O=b.call(this,U),N=this.clone();return N.root=O.name,N},remove:function(x){x=this.root+x;var U=this.files[x];if(U||(x.slice(-1)!=="/"&&(x+="/"),U=this.files[x]),U&&!U.dir)delete this.files[x];else for(var O=this.filter(function(B,H){return H.name.slice(0,x.length)===x}),N=0;N<O.length;N++)delete this.files[O[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var U,O={};try{if((O=r.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");r.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var N=O.comment||this.comment||"";U=s.generateWorker(this,O,N)}catch(B){(U=new c("error")).error(B)}return new g(U,O.type||"string",O.mimeType)},generateAsync:function(x,U){return this.generateInternalStream(x).accumulate(U)},generateNodeStream:function(x,U){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(U)}};A.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,A,_){A.exports=o("stream")},{stream:void 0}],17:[function(o,A,_){var l=o("./DataReader");function i(r){l.call(this,r);for(var c=0;c<this.data.length;c++)r[c]=255&r[c]}o("../utils").inherits(i,l),i.prototype.byteAt=function(r){return this.data[this.zero+r]},i.prototype.lastIndexOfSignature=function(r){for(var c=r.charCodeAt(0),g=r.charCodeAt(1),d=r.charCodeAt(2),a=r.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===c&&this.data[f+1]===g&&this.data[f+2]===d&&this.data[f+3]===a)return f-this.zero;return-1},i.prototype.readAndCheckSignature=function(r){var c=r.charCodeAt(0),g=r.charCodeAt(1),d=r.charCodeAt(2),a=r.charCodeAt(3),f=this.readData(4);return c===f[0]&&g===f[1]&&d===f[2]&&a===f[3]},i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=i},{"../utils":32,"./DataReader":18}],18:[function(o,A,_){var l=o("../utils");function i(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var c,g=0;for(this.checkOffset(r),c=this.index+r-1;c>=this.index;c--)g=(g<<8)+this.byteAt(c);return this.index+=r,g},readString:function(r){return l.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},A.exports=i},{"../utils":32}],19:[function(o,A,_){var l=o("./Uint8ArrayReader");function i(r){l.call(this,r)}o("../utils").inherits(i,l),i.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,A,_){var l=o("./DataReader");function i(r){l.call(this,r)}o("../utils").inherits(i,l),i.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},i.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},i.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},i.prototype.readData=function(r){this.checkOffset(r);var c=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=i},{"../utils":32,"./DataReader":18}],21:[function(o,A,_){var l=o("./ArrayReader");function i(r){l.call(this,r)}o("../utils").inherits(i,l),i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,c},A.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(o,A,_){var l=o("../utils"),i=o("../support"),r=o("./ArrayReader"),c=o("./StringReader"),g=o("./NodeBufferReader"),d=o("./Uint8ArrayReader");A.exports=function(a){var f=l.getTypeOf(a);return l.checkSupport(f),f!=="string"||i.uint8array?f==="nodebuffer"?new g(a):i.uint8array?new d(l.transformTo("uint8array",a)):new r(l.transformTo("array",a)):new c(a)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,A,_){_.LOCAL_FILE_HEADER="PK",_.CENTRAL_FILE_HEADER="PK",_.CENTRAL_DIRECTORY_END="PK",_.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",_.ZIP64_CENTRAL_DIRECTORY_END="PK",_.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,A,_){var l=o("./GenericWorker"),i=o("../utils");function r(c){l.call(this,"ConvertWorker to "+c),this.destType=c}i.inherits(r,l),r.prototype.processChunk=function(c){this.push({data:i.transformTo(this.destType,c.data),meta:c.meta})},A.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(o,A,_){var l=o("./GenericWorker"),i=o("../crc32");function r(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(r,l),r.prototype.processChunk=function(c){this.streamInfo.crc32=i(c.data,this.streamInfo.crc32||0),this.push(c)},A.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,A,_){var l=o("../utils"),i=o("./GenericWorker");function r(c){i.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}l.inherits(r,i),r.prototype.processChunk=function(c){if(c){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+c.data.length}i.prototype.processChunk.call(this,c)},A.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(o,A,_){var l=o("../utils"),i=o("./GenericWorker");function r(c){i.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){g.dataIsReady=!0,g.data=d,g.max=d&&d.length||0,g.type=l.getTypeOf(d),g.isPaused||g._tickAndRepeat()},function(d){g.error(d)})}l.inherits(r,i),r.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,g);break;case"uint8array":c=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":c=this.data.slice(this.index,g)}return this.index=g,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},A.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(o,A,_){function l(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,r){return this._listeners[i].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,r){if(this._listeners[i])for(var c=0;c<this._listeners[i].length;c++)this._listeners[i][c].call(this,r)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var r=this;return i.on("data",function(c){r.processChunk(c)}),i.on("end",function(){r.end()}),i.on("error",function(c){r.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,r){return this.extraStreamInfo[i]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},A.exports=l},{}],29:[function(o,A,_){var l=o("../utils"),i=o("./ConvertWorker"),r=o("./GenericWorker"),c=o("../base64"),g=o("../support"),d=o("../external"),a=null;if(g.nodestream)try{a=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(u,n){return new d.Promise(function(p,h){var b=[],y=u._internalType,S=u._outputType,x=u._mimeType;u.on("data",function(U,O){b.push(U),n&&n(O)}).on("error",function(U){b=[],h(U)}).on("end",function(){try{var U=function(O,N,B){switch(O){case"blob":return l.newBlob(l.transformTo("arraybuffer",N),B);case"base64":return c.encode(N);default:return l.transformTo(O,N)}}(S,function(O,N){var B,H=0,$=null,w=0;for(B=0;B<N.length;B++)w+=N[B].length;switch(O){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for($=new Uint8Array(w),B=0;B<N.length;B++)$.set(N[B],H),H+=N[B].length;return $;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+O+"'")}}(y,b),x);p(U)}catch(O){h(O)}b=[]}).resume()})}function s(u,n,p){var h=n;switch(n){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=n,this._mimeType=p,l.checkSupport(h),this._worker=u.pipe(new i(h)),u.lock()}catch(b){this._worker=new r("error"),this._worker.error(b)}}s.prototype={accumulate:function(u){return f(this,u)},on:function(u,n){var p=this;return u==="data"?this._worker.on(u,function(h){n.call(p,h.data,h.meta)}):this._worker.on(u,function(){l.delay(n,arguments,p)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(u){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new a(this,{objectMode:this._outputType!=="nodebuffer"},u)}},A.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,A,_){if(_.base64=!0,_.array=!0,_.string=!0,_.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",_.nodebuffer=typeof Buffer<"u",_.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")_.blob=!1;else{var l=new ArrayBuffer(0);try{_.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(l),_.blob=i.getBlob("application/zip").size===0}catch{_.blob=!1}}}try{_.nodestream=!!o("readable-stream").Readable}catch{_.nodestream=!1}},{"readable-stream":16}],31:[function(o,A,_){for(var l=o("./utils"),i=o("./support"),r=o("./nodejsUtils"),c=o("./stream/GenericWorker"),g=new Array(256),d=0;d<256;d++)g[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;g[254]=g[254]=1;function a(){c.call(this,"utf-8 decode"),this.leftOver=null}function f(){c.call(this,"utf-8 encode")}_.utf8encode=function(s){return i.nodebuffer?r.newBufferFrom(s,"utf-8"):function(u){var n,p,h,b,y,S=u.length,x=0;for(b=0;b<S;b++)(64512&(p=u.charCodeAt(b)))==55296&&b+1<S&&(64512&(h=u.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),b++),x+=p<128?1:p<2048?2:p<65536?3:4;for(n=i.uint8array?new Uint8Array(x):new Array(x),b=y=0;y<x;b++)(64512&(p=u.charCodeAt(b)))==55296&&b+1<S&&(64512&(h=u.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),b++),p<128?n[y++]=p:(p<2048?n[y++]=192|p>>>6:(p<65536?n[y++]=224|p>>>12:(n[y++]=240|p>>>18,n[y++]=128|p>>>12&63),n[y++]=128|p>>>6&63),n[y++]=128|63&p);return n}(s)},_.utf8decode=function(s){return i.nodebuffer?l.transformTo("nodebuffer",s).toString("utf-8"):function(u){var n,p,h,b,y=u.length,S=new Array(2*y);for(n=p=0;n<y;)if((h=u[n++])<128)S[p++]=h;else if(4<(b=g[h]))S[p++]=65533,n+=b-1;else{for(h&=b===2?31:b===3?15:7;1<b&&n<y;)h=h<<6|63&u[n++],b--;1<b?S[p++]=65533:h<65536?S[p++]=h:(h-=65536,S[p++]=55296|h>>10&1023,S[p++]=56320|1023&h)}return S.length!==p&&(S.subarray?S=S.subarray(0,p):S.length=p),l.applyFromCharCode(S)}(s=l.transformTo(i.uint8array?"uint8array":"array",s))},l.inherits(a,c),a.prototype.processChunk=function(s){var u=l.transformTo(i.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var n=u;(u=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),u.set(n,this.leftOver.length)}else u=this.leftOver.concat(u);this.leftOver=null}var p=function(b,y){var S;for((y=y||b.length)>b.length&&(y=b.length),S=y-1;0<=S&&(192&b[S])==128;)S--;return S<0||S===0?y:S+g[b[S]]>y?S:y}(u),h=u;p!==u.length&&(i.uint8array?(h=u.subarray(0,p),this.leftOver=u.subarray(p,u.length)):(h=u.slice(0,p),this.leftOver=u.slice(p,u.length))),this.push({data:_.utf8decode(h),meta:s.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:_.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},_.Utf8DecodeWorker=a,l.inherits(f,c),f.prototype.processChunk=function(s){this.push({data:_.utf8encode(s.data),meta:s.meta})},_.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,A,_){var l=o("./support"),i=o("./base64"),r=o("./nodejsUtils"),c=o("./external");function g(n){return n}function d(n,p){for(var h=0;h<n.length;++h)p[h]=255&n.charCodeAt(h);return p}o("setimmediate"),_.newBlob=function(n,p){_.checkSupport("blob");try{return new Blob([n],{type:p})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(n),h.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var a={stringifyByChunk:function(n,p,h){var b=[],y=0,S=n.length;if(S<=h)return String.fromCharCode.apply(null,n);for(;y<S;)p==="array"||p==="nodebuffer"?b.push(String.fromCharCode.apply(null,n.slice(y,Math.min(y+h,S)))):b.push(String.fromCharCode.apply(null,n.subarray(y,Math.min(y+h,S)))),y+=h;return b.join("")},stringifyByChar:function(n){for(var p="",h=0;h<n.length;h++)p+=String.fromCharCode(n[h]);return p},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function f(n){var p=65536,h=_.getTypeOf(n),b=!0;if(h==="uint8array"?b=a.applyCanBeUsed.uint8array:h==="nodebuffer"&&(b=a.applyCanBeUsed.nodebuffer),b)for(;1<p;)try{return a.stringifyByChunk(n,h,p)}catch{p=Math.floor(p/2)}return a.stringifyByChar(n)}function s(n,p){for(var h=0;h<n.length;h++)p[h]=n[h];return p}_.applyFromCharCode=f;var u={};u.string={string:g,array:function(n){return d(n,new Array(n.length))},arraybuffer:function(n){return u.string.uint8array(n).buffer},uint8array:function(n){return d(n,new Uint8Array(n.length))},nodebuffer:function(n){return d(n,r.allocBuffer(n.length))}},u.array={string:f,array:g,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(n)}},u.arraybuffer={string:function(n){return f(new Uint8Array(n))},array:function(n){return s(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:g,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(new Uint8Array(n))}},u.uint8array={string:f,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:g,nodebuffer:function(n){return r.newBufferFrom(n)}},u.nodebuffer={string:f,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return u.nodebuffer.uint8array(n).buffer},uint8array:function(n){return s(n,new Uint8Array(n.length))},nodebuffer:g},_.transformTo=function(n,p){if(p=p||"",!n)return p;_.checkSupport(n);var h=_.getTypeOf(p);return u[h][n](p)},_.resolve=function(n){for(var p=n.split("/"),h=[],b=0;b<p.length;b++){var y=p[b];y==="."||y===""&&b!==0&&b!==p.length-1||(y===".."?h.pop():h.push(y))}return h.join("/")},_.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":l.nodebuffer&&r.isBuffer(n)?"nodebuffer":l.uint8array&&n instanceof Uint8Array?"uint8array":l.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},_.checkSupport=function(n){if(!l[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},_.MAX_VALUE_16BITS=65535,_.MAX_VALUE_32BITS=-1,_.pretty=function(n){var p,h,b="";for(h=0;h<(n||"").length;h++)b+="\\x"+((p=n.charCodeAt(h))<16?"0":"")+p.toString(16).toUpperCase();return b},_.delay=function(n,p,h){setImmediate(function(){n.apply(h||null,p||[])})},_.inherits=function(n,p){function h(){}h.prototype=p.prototype,n.prototype=new h},_.extend=function(){var n,p,h={};for(n=0;n<arguments.length;n++)for(p in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],p)&&h[p]===void 0&&(h[p]=arguments[n][p]);return h},_.prepareContent=function(n,p,h,b,y){return c.Promise.resolve(p).then(function(S){return l.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new c.Promise(function(x,U){var O=new FileReader;O.onload=function(N){x(N.target.result)},O.onerror=function(N){U(N.target.error)},O.readAsArrayBuffer(S)}):S}).then(function(S){var x=_.getTypeOf(S);return x?(x==="arraybuffer"?S=_.transformTo("uint8array",S):x==="string"&&(y?S=i.decode(S):h&&b!==!0&&(S=function(U){return d(U,l.uint8array?new Uint8Array(U.length):new Array(U.length))}(S))),S):c.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,A,_){var l=o("./reader/readerFor"),i=o("./utils"),r=o("./signature"),c=o("./zipEntry"),g=o("./support");function d(a){this.files=[],this.loadOptions=a}d.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(f)+", expected "+i.pretty(a)+")")}},isSignature:function(a,f){var s=this.reader.index;this.reader.setIndex(a);var u=this.reader.readString(4)===f;return this.reader.setIndex(s),u},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),f=g.uint8array?"uint8array":"array",s=i.transformTo(f,a);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,f,s,u=this.zip64EndOfCentralSize-44;0<u;)a=this.reader.readInt(2),f=this.reader.readInt(4),s=this.reader.readData(f),this.zip64ExtensibleData[a]={id:a,length:f,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,f;for(a=0;a<this.files.length;a++)f=this.files[a],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(a=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(a<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(a);var f=a;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(a=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var u=f-s;if(0<u)this.isSignature(f,r.CENTRAL_FILE_HEADER)||(this.reader.zero=u);else if(u<0)throw new Error("Corrupted zip: missing "+Math.abs(u)+" bytes.")},prepareReader:function(a){this.reader=l(a)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},A.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,A,_){var l=o("./reader/readerFor"),i=o("./utils"),r=o("./compressedObject"),c=o("./crc32"),g=o("./utf8"),d=o("./compressions"),a=o("./support");function f(s,u){this.options=s,this.loadOptions=u}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var u,n;if(s.skip(22),this.fileNameLength=s.readInt(2),n=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((u=function(p){for(var h in d)if(Object.prototype.hasOwnProperty.call(d,h)&&d[h].magic===p)return d[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,u,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var u=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(u),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=l(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var u,n,p,h=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<h;)u=s.readInt(2),n=s.readInt(2),p=s.readData(n),this.extraFields[u]={id:u,length:n,value:p};s.setIndex(h)},handleUTF8:function(){var s=a.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var u=this.findExtraFieldUnicodePath();if(u!==null)this.fileNameStr=u;else{var n=i.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var h=i.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var u=l(s.value);return u.readInt(1)!==1||c(this.fileName)!==u.readInt(4)?null:g.utf8decode(u.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var u=l(s.value);return u.readInt(1)!==1||c(this.fileComment)!==u.readInt(4)?null:g.utf8decode(u.readData(s.length-5))}return null}},A.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,A,_){function l(u,n,p){this.name=u,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=n,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var i=o("./stream/StreamHelper"),r=o("./stream/DataWorker"),c=o("./utf8"),g=o("./compressedObject"),d=o("./stream/GenericWorker");l.prototype={internalStream:function(u){var n=null,p="string";try{if(!u)throw new Error("No output type specified.");var h=(p=u.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),n=this._decompressWorker();var b=!this._dataBinary;b&&!h&&(n=n.pipe(new c.Utf8EncodeWorker)),!b&&h&&(n=n.pipe(new c.Utf8DecodeWorker))}catch(y){(n=new d("error")).error(y)}return new i(n,p,"")},async:function(u,n){return this.internalStream(u).accumulate(n)},nodeStream:function(u,n){return this.internalStream(u||"nodebuffer").toNodejsStream(n)},_compressWorker:function(u,n){if(this._data instanceof g&&this._data.compression.magic===u.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new c.Utf8EncodeWorker)),g.createWorkerFrom(p,u,n)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof d?this._data:new r(this._data)}};for(var a=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<a.length;s++)l.prototype[a[s]]=f;A.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,A,_){(function(l){var i,r,c=l.MutationObserver||l.WebKitMutationObserver;if(c){var g=0,d=new c(u),a=l.document.createTextNode("");d.observe(a,{characterData:!0}),i=function(){a.data=g=++g%2}}else if(l.setImmediate||l.MessageChannel===void 0)i="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var n=l.document.createElement("script");n.onreadystatechange=function(){u(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},l.document.documentElement.appendChild(n)}:function(){setTimeout(u,0)};else{var f=new l.MessageChannel;f.port1.onmessage=u,i=function(){f.port2.postMessage(0)}}var s=[];function u(){var n,p;r=!0;for(var h=s.length;h;){for(p=s,s=[],n=-1;++n<h;)p[n]();h=s.length}r=!1}A.exports=function(n){s.push(n)!==1||r||i()}}).call(this,typeof _t<"u"?_t:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,A,_){var l=o("immediate");function i(){}var r={},c=["REJECTED"],g=["FULFILLED"],d=["PENDING"];function a(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,h!==i&&n(this,h)}function f(h,b,y){this.promise=h,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function s(h,b,y){l(function(){var S;try{S=b(y)}catch(x){return r.reject(h,x)}S===h?r.reject(h,new TypeError("Cannot resolve promise with itself")):r.resolve(h,S)})}function u(h){var b=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof b=="function")return function(){b.apply(h,arguments)}}function n(h,b){var y=!1;function S(O){y||(y=!0,r.reject(h,O))}function x(O){y||(y=!0,r.resolve(h,O))}var U=p(function(){b(x,S)});U.status==="error"&&S(U.value)}function p(h,b){var y={};try{y.value=h(b),y.status="success"}catch(S){y.status="error",y.value=S}return y}(A.exports=a).prototype.finally=function(h){if(typeof h!="function")return this;var b=this.constructor;return this.then(function(y){return b.resolve(h()).then(function(){return y})},function(y){return b.resolve(h()).then(function(){throw y})})},a.prototype.catch=function(h){return this.then(null,h)},a.prototype.then=function(h,b){if(typeof h!="function"&&this.state===g||typeof b!="function"&&this.state===c)return this;var y=new this.constructor(i);return this.state!==d?s(y,this.state===g?h:b,this.outcome):this.queue.push(new f(y,h,b)),y},f.prototype.callFulfilled=function(h){r.resolve(this.promise,h)},f.prototype.otherCallFulfilled=function(h){s(this.promise,this.onFulfilled,h)},f.prototype.callRejected=function(h){r.reject(this.promise,h)},f.prototype.otherCallRejected=function(h){s(this.promise,this.onRejected,h)},r.resolve=function(h,b){var y=p(u,b);if(y.status==="error")return r.reject(h,y.value);var S=y.value;if(S)n(h,S);else{h.state=g,h.outcome=b;for(var x=-1,U=h.queue.length;++x<U;)h.queue[x].callFulfilled(b)}return h},r.reject=function(h,b){h.state=c,h.outcome=b;for(var y=-1,S=h.queue.length;++y<S;)h.queue[y].callRejected(b);return h},a.resolve=function(h){return h instanceof this?h:r.resolve(new this(i),h)},a.reject=function(h){var b=new this(i);return r.reject(b,h)},a.all=function(h){var b=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=h.length,S=!1;if(!y)return this.resolve([]);for(var x=new Array(y),U=0,O=-1,N=new this(i);++O<y;)B(h[O],O);return N;function B(H,$){b.resolve(H).then(function(w){x[$]=w,++U!==y||S||(S=!0,r.resolve(N,x))},function(w){S||(S=!0,r.reject(N,w))})}},a.race=function(h){var b=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=h.length,S=!1;if(!y)return this.resolve([]);for(var x=-1,U=new this(i);++x<y;)O=h[x],b.resolve(O).then(function(N){S||(S=!0,r.resolve(U,N))},function(N){S||(S=!0,r.reject(U,N))});var O;return U}},{immediate:36}],38:[function(o,A,_){var l={};(0,o("./lib/utils/common").assign)(l,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),A.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,A,_){var l=o("./zlib/deflate"),i=o("./utils/common"),r=o("./utils/strings"),c=o("./zlib/messages"),g=o("./zlib/zstream"),d=Object.prototype.toString,a=0,f=-1,s=0,u=8;function n(h){if(!(this instanceof n))return new n(h);this.options=i.assign({level:f,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},h||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var y=l.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(y!==a)throw new Error(c[y]);if(b.header&&l.deflateSetHeader(this.strm,b.header),b.dictionary){var S;if(S=typeof b.dictionary=="string"?r.string2buf(b.dictionary):d.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(y=l.deflateSetDictionary(this.strm,S))!==a)throw new Error(c[y]);this._dict_set=!0}}function p(h,b){var y=new n(b);if(y.push(h,!0),y.err)throw y.msg||c[y.err];return y.result}n.prototype.push=function(h,b){var y,S,x=this.strm,U=this.options.chunkSize;if(this.ended)return!1;S=b===~~b?b:b===!0?4:0,typeof h=="string"?x.input=r.string2buf(h):d.call(h)==="[object ArrayBuffer]"?x.input=new Uint8Array(h):x.input=h,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new i.Buf8(U),x.next_out=0,x.avail_out=U),(y=l.deflate(x,S))!==1&&y!==a)return this.onEnd(y),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(i.shrinkBuf(x.output,x.next_out))):this.onData(i.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&y!==1);return S===4?(y=l.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===a):S!==2||(this.onEnd(a),!(x.avail_out=0))},n.prototype.onData=function(h){this.chunks.push(h)},n.prototype.onEnd=function(h){h===a&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},_.Deflate=n,_.deflate=p,_.deflateRaw=function(h,b){return(b=b||{}).raw=!0,p(h,b)},_.gzip=function(h,b){return(b=b||{}).gzip=!0,p(h,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,A,_){var l=o("./zlib/inflate"),i=o("./utils/common"),r=o("./utils/strings"),c=o("./zlib/constants"),g=o("./zlib/messages"),d=o("./zlib/zstream"),a=o("./zlib/gzheader"),f=Object.prototype.toString;function s(n){if(!(this instanceof s))return new s(n);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},n||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||n&&n.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var h=l.inflateInit2(this.strm,p.windowBits);if(h!==c.Z_OK)throw new Error(g[h]);this.header=new a,l.inflateGetHeader(this.strm,this.header)}function u(n,p){var h=new s(p);if(h.push(n,!0),h.err)throw h.msg||g[h.err];return h.result}s.prototype.push=function(n,p){var h,b,y,S,x,U,O=this.strm,N=this.options.chunkSize,B=this.options.dictionary,H=!1;if(this.ended)return!1;b=p===~~p?p:p===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof n=="string"?O.input=r.binstring2buf(n):f.call(n)==="[object ArrayBuffer]"?O.input=new Uint8Array(n):O.input=n,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new i.Buf8(N),O.next_out=0,O.avail_out=N),(h=l.inflate(O,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&B&&(U=typeof B=="string"?r.string2buf(B):f.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,h=l.inflateSetDictionary(this.strm,U)),h===c.Z_BUF_ERROR&&H===!0&&(h=c.Z_OK,H=!1),h!==c.Z_STREAM_END&&h!==c.Z_OK)return this.onEnd(h),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&h!==c.Z_STREAM_END&&(O.avail_in!==0||b!==c.Z_FINISH&&b!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=r.utf8border(O.output,O.next_out),S=O.next_out-y,x=r.buf2string(O.output,y),O.next_out=S,O.avail_out=N-S,S&&i.arraySet(O.output,O.output,y,S,0),this.onData(x)):this.onData(i.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(H=!0)}while((0<O.avail_in||O.avail_out===0)&&h!==c.Z_STREAM_END);return h===c.Z_STREAM_END&&(b=c.Z_FINISH),b===c.Z_FINISH?(h=l.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===c.Z_OK):b!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(O.avail_out=0))},s.prototype.onData=function(n){this.chunks.push(n)},s.prototype.onEnd=function(n){n===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},_.Inflate=s,_.inflate=u,_.inflateRaw=function(n,p){return(p=p||{}).raw=!0,u(n,p)},_.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,A,_){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";_.assign=function(c){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var d=g.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var a in d)d.hasOwnProperty(a)&&(c[a]=d[a])}}return c},_.shrinkBuf=function(c,g){return c.length===g?c:c.subarray?c.subarray(0,g):(c.length=g,c)};var i={arraySet:function(c,g,d,a,f){if(g.subarray&&c.subarray)c.set(g.subarray(d,d+a),f);else for(var s=0;s<a;s++)c[f+s]=g[d+s]},flattenChunks:function(c){var g,d,a,f,s,u;for(g=a=0,d=c.length;g<d;g++)a+=c[g].length;for(u=new Uint8Array(a),g=f=0,d=c.length;g<d;g++)s=c[g],u.set(s,f),f+=s.length;return u}},r={arraySet:function(c,g,d,a,f){for(var s=0;s<a;s++)c[f+s]=g[d+s]},flattenChunks:function(c){return[].concat.apply([],c)}};_.setTyped=function(c){c?(_.Buf8=Uint8Array,_.Buf16=Uint16Array,_.Buf32=Int32Array,_.assign(_,i)):(_.Buf8=Array,_.Buf16=Array,_.Buf32=Array,_.assign(_,r))},_.setTyped(l)},{}],42:[function(o,A,_){var l=o("./common"),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var c=new l.Buf8(256),g=0;g<256;g++)c[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function d(a,f){if(f<65537&&(a.subarray&&r||!a.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(a,f));for(var s="",u=0;u<f;u++)s+=String.fromCharCode(a[u]);return s}c[254]=c[254]=1,_.string2buf=function(a){var f,s,u,n,p,h=a.length,b=0;for(n=0;n<h;n++)(64512&(s=a.charCodeAt(n)))==55296&&n+1<h&&(64512&(u=a.charCodeAt(n+1)))==56320&&(s=65536+(s-55296<<10)+(u-56320),n++),b+=s<128?1:s<2048?2:s<65536?3:4;for(f=new l.Buf8(b),n=p=0;p<b;n++)(64512&(s=a.charCodeAt(n)))==55296&&n+1<h&&(64512&(u=a.charCodeAt(n+1)))==56320&&(s=65536+(s-55296<<10)+(u-56320),n++),s<128?f[p++]=s:(s<2048?f[p++]=192|s>>>6:(s<65536?f[p++]=224|s>>>12:(f[p++]=240|s>>>18,f[p++]=128|s>>>12&63),f[p++]=128|s>>>6&63),f[p++]=128|63&s);return f},_.buf2binstring=function(a){return d(a,a.length)},_.binstring2buf=function(a){for(var f=new l.Buf8(a.length),s=0,u=f.length;s<u;s++)f[s]=a.charCodeAt(s);return f},_.buf2string=function(a,f){var s,u,n,p,h=f||a.length,b=new Array(2*h);for(s=u=0;s<h;)if((n=a[s++])<128)b[u++]=n;else if(4<(p=c[n]))b[u++]=65533,s+=p-1;else{for(n&=p===2?31:p===3?15:7;1<p&&s<h;)n=n<<6|63&a[s++],p--;1<p?b[u++]=65533:n<65536?b[u++]=n:(n-=65536,b[u++]=55296|n>>10&1023,b[u++]=56320|1023&n)}return d(b,u)},_.utf8border=function(a,f){var s;for((f=f||a.length)>a.length&&(f=a.length),s=f-1;0<=s&&(192&a[s])==128;)s--;return s<0||s===0?f:s+c[a[s]]>f?s:f}},{"./common":41}],43:[function(o,A,_){A.exports=function(l,i,r,c){for(var g=65535&l|0,d=l>>>16&65535|0,a=0;r!==0;){for(r-=a=2e3<r?2e3:r;d=d+(g=g+i[c++]|0)|0,--a;);g%=65521,d%=65521}return g|d<<16|0}},{}],44:[function(o,A,_){A.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,A,_){var l=function(){for(var i,r=[],c=0;c<256;c++){i=c;for(var g=0;g<8;g++)i=1&i?3988292384^i>>>1:i>>>1;r[c]=i}return r}();A.exports=function(i,r,c,g){var d=l,a=g+c;i^=-1;for(var f=g;f<a;f++)i=i>>>8^d[255&(i^r[f])];return-1^i}},{}],46:[function(o,A,_){var l,i=o("../utils/common"),r=o("./trees"),c=o("./adler32"),g=o("./crc32"),d=o("./messages"),a=0,f=4,s=0,u=-2,n=-1,p=4,h=2,b=8,y=9,S=286,x=30,U=19,O=2*S+1,N=15,B=3,H=258,$=H+B+1,w=42,R=113,e=1,D=2,J=3,P=4;function tt(t,F){return t.msg=d[F],F}function Z(t){return(t<<1)-(4<t?9:0)}function Q(t){for(var F=t.length;0<=--F;)t[F]=0}function z(t){var F=t.state,T=F.pending;T>t.avail_out&&(T=t.avail_out),T!==0&&(i.arraySet(t.output,F.pending_buf,F.pending_out,T,t.next_out),t.next_out+=T,F.pending_out+=T,t.total_out+=T,t.avail_out-=T,F.pending-=T,F.pending===0&&(F.pending_out=0))}function E(t,F){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,F),t.block_start=t.strstart,z(t.strm)}function q(t,F){t.pending_buf[t.pending++]=F}function V(t,F){t.pending_buf[t.pending++]=F>>>8&255,t.pending_buf[t.pending++]=255&F}function G(t,F){var T,v,m=t.max_chain_length,k=t.strstart,j=t.prev_length,L=t.nice_match,C=t.strstart>t.w_size-$?t.strstart-(t.w_size-$):0,W=t.window,K=t.w_mask,M=t.prev,X=t.strstart+H,it=W[k+j-1],rt=W[k+j];t.prev_length>=t.good_match&&(m>>=2),L>t.lookahead&&(L=t.lookahead);do if(W[(T=F)+j]===rt&&W[T+j-1]===it&&W[T]===W[k]&&W[++T]===W[k+1]){k+=2,T++;do;while(W[++k]===W[++T]&&W[++k]===W[++T]&&W[++k]===W[++T]&&W[++k]===W[++T]&&W[++k]===W[++T]&&W[++k]===W[++T]&&W[++k]===W[++T]&&W[++k]===W[++T]&&k<X);if(v=H-(X-k),k=X-H,j<v){if(t.match_start=F,L<=(j=v))break;it=W[k+j-1],rt=W[k+j]}}while((F=M[F&K])>C&&--m!=0);return j<=t.lookahead?j:t.lookahead}function st(t){var F,T,v,m,k,j,L,C,W,K,M=t.w_size;do{if(m=t.window_size-t.lookahead-t.strstart,t.strstart>=M+(M-$)){for(i.arraySet(t.window,t.window,M,M,0),t.match_start-=M,t.strstart-=M,t.block_start-=M,F=T=t.hash_size;v=t.head[--F],t.head[F]=M<=v?v-M:0,--T;);for(F=T=M;v=t.prev[--F],t.prev[F]=M<=v?v-M:0,--T;);m+=M}if(t.strm.avail_in===0)break;if(j=t.strm,L=t.window,C=t.strstart+t.lookahead,W=m,K=void 0,K=j.avail_in,W<K&&(K=W),T=K===0?0:(j.avail_in-=K,i.arraySet(L,j.input,j.next_in,K,C),j.state.wrap===1?j.adler=c(j.adler,L,K,C):j.state.wrap===2&&(j.adler=g(j.adler,L,K,C)),j.next_in+=K,j.total_in+=K,K),t.lookahead+=T,t.lookahead+t.insert>=B)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+B-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<$&&t.strm.avail_in!==0)}function ut(t,F){for(var T,v;;){if(t.lookahead<$){if(st(t),t.lookahead<$&&F===a)return e;if(t.lookahead===0)break}if(T=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),T!==0&&t.strstart-T<=t.w_size-$&&(t.match_length=G(t,T)),t.match_length>=B)if(v=r._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else v=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(v&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<B-1?t.strstart:B-1,F===f?(E(t,!0),t.strm.avail_out===0?J:P):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:D}function et(t,F){for(var T,v,m;;){if(t.lookahead<$){if(st(t),t.lookahead<$&&F===a)return e;if(t.lookahead===0)break}if(T=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,T!==0&&t.prev_length<t.max_lazy_match&&t.strstart-T<=t.w_size-$&&(t.match_length=G(t,T),t.match_length<=5&&(t.strategy===1||t.match_length===B&&4096<t.strstart-t.match_start)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){for(m=t.strstart+t.lookahead-B,v=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=m&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,T=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=B-1,t.strstart++,v&&(E(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((v=r._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(v=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,F===f?(E(t,!0),t.strm.avail_out===0?J:P):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:D}function nt(t,F,T,v,m){this.good_length=t,this.max_lazy=F,this.nice_length=T,this.max_chain=v,this.func=m}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*O),this.dyn_dtree=new i.Buf16(2*(2*x+1)),this.bl_tree=new i.Buf16(2*(2*U+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(N+1),this.heap=new i.Buf16(2*S+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*S+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(t){var F;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=h,(F=t.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?w:R,t.adler=F.wrap===2?0:1,F.last_flush=a,r._tr_init(F),s):tt(t,u)}function ct(t){var F=at(t);return F===s&&function(T){T.window_size=2*T.w_size,Q(T.head),T.max_lazy_match=l[T.level].max_lazy,T.good_match=l[T.level].good_length,T.nice_match=l[T.level].nice_length,T.max_chain_length=l[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=B-1,T.match_available=0,T.ins_h=0}(t.state),F}function ft(t,F,T,v,m,k){if(!t)return u;var j=1;if(F===n&&(F=6),v<0?(j=0,v=-v):15<v&&(j=2,v-=16),m<1||y<m||T!==b||v<8||15<v||F<0||9<F||k<0||p<k)return tt(t,u);v===8&&(v=9);var L=new lt;return(t.state=L).strm=t,L.wrap=j,L.gzhead=null,L.w_bits=v,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=m+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+B-1)/B),L.window=new i.Buf8(2*L.w_size),L.head=new i.Buf16(L.hash_size),L.prev=new i.Buf16(L.w_size),L.lit_bufsize=1<<m+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new i.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=F,L.strategy=k,L.method=T,ct(t)}l=[new nt(0,0,0,0,function(t,F){var T=65535;for(T>t.pending_buf_size-5&&(T=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),t.lookahead===0&&F===a)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var v=t.block_start+T;if((t.strstart===0||t.strstart>=v)&&(t.lookahead=t.strstart-v,t.strstart=v,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-$&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=0,F===f?(E(t,!0),t.strm.avail_out===0?J:P):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),e)}),new nt(4,4,8,4,ut),new nt(4,5,16,8,ut),new nt(4,6,32,32,ut),new nt(4,4,16,16,et),new nt(8,16,32,32,et),new nt(8,16,128,128,et),new nt(8,32,128,256,et),new nt(32,128,258,1024,et),new nt(32,258,258,4096,et)],_.deflateInit=function(t,F){return ft(t,F,b,15,8,0)},_.deflateInit2=ft,_.deflateReset=ct,_.deflateResetKeep=at,_.deflateSetHeader=function(t,F){return t&&t.state?t.state.wrap!==2?u:(t.state.gzhead=F,s):u},_.deflate=function(t,F){var T,v,m,k;if(!t||!t.state||5<F||F<0)return t?tt(t,u):u;if(v=t.state,!t.output||!t.input&&t.avail_in!==0||v.status===666&&F!==f)return tt(t,t.avail_out===0?-5:u);if(v.strm=t,T=v.last_flush,v.last_flush=F,v.status===w)if(v.wrap===2)t.adler=0,q(v,31),q(v,139),q(v,8),v.gzhead?(q(v,(v.gzhead.text?1:0)+(v.gzhead.hcrc?2:0)+(v.gzhead.extra?4:0)+(v.gzhead.name?8:0)+(v.gzhead.comment?16:0)),q(v,255&v.gzhead.time),q(v,v.gzhead.time>>8&255),q(v,v.gzhead.time>>16&255),q(v,v.gzhead.time>>24&255),q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),q(v,255&v.gzhead.os),v.gzhead.extra&&v.gzhead.extra.length&&(q(v,255&v.gzhead.extra.length),q(v,v.gzhead.extra.length>>8&255)),v.gzhead.hcrc&&(t.adler=g(t.adler,v.pending_buf,v.pending,0)),v.gzindex=0,v.status=69):(q(v,0),q(v,0),q(v,0),q(v,0),q(v,0),q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),q(v,3),v.status=R);else{var j=b+(v.w_bits-8<<4)<<8;j|=(2<=v.strategy||v.level<2?0:v.level<6?1:v.level===6?2:3)<<6,v.strstart!==0&&(j|=32),j+=31-j%31,v.status=R,V(v,j),v.strstart!==0&&(V(v,t.adler>>>16),V(v,65535&t.adler)),t.adler=1}if(v.status===69)if(v.gzhead.extra){for(m=v.pending;v.gzindex<(65535&v.gzhead.extra.length)&&(v.pending!==v.pending_buf_size||(v.gzhead.hcrc&&v.pending>m&&(t.adler=g(t.adler,v.pending_buf,v.pending-m,m)),z(t),m=v.pending,v.pending!==v.pending_buf_size));)q(v,255&v.gzhead.extra[v.gzindex]),v.gzindex++;v.gzhead.hcrc&&v.pending>m&&(t.adler=g(t.adler,v.pending_buf,v.pending-m,m)),v.gzindex===v.gzhead.extra.length&&(v.gzindex=0,v.status=73)}else v.status=73;if(v.status===73)if(v.gzhead.name){m=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>m&&(t.adler=g(t.adler,v.pending_buf,v.pending-m,m)),z(t),m=v.pending,v.pending===v.pending_buf_size)){k=1;break}k=v.gzindex<v.gzhead.name.length?255&v.gzhead.name.charCodeAt(v.gzindex++):0,q(v,k)}while(k!==0);v.gzhead.hcrc&&v.pending>m&&(t.adler=g(t.adler,v.pending_buf,v.pending-m,m)),k===0&&(v.gzindex=0,v.status=91)}else v.status=91;if(v.status===91)if(v.gzhead.comment){m=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>m&&(t.adler=g(t.adler,v.pending_buf,v.pending-m,m)),z(t),m=v.pending,v.pending===v.pending_buf_size)){k=1;break}k=v.gzindex<v.gzhead.comment.length?255&v.gzhead.comment.charCodeAt(v.gzindex++):0,q(v,k)}while(k!==0);v.gzhead.hcrc&&v.pending>m&&(t.adler=g(t.adler,v.pending_buf,v.pending-m,m)),k===0&&(v.status=103)}else v.status=103;if(v.status===103&&(v.gzhead.hcrc?(v.pending+2>v.pending_buf_size&&z(t),v.pending+2<=v.pending_buf_size&&(q(v,255&t.adler),q(v,t.adler>>8&255),t.adler=0,v.status=R)):v.status=R),v.pending!==0){if(z(t),t.avail_out===0)return v.last_flush=-1,s}else if(t.avail_in===0&&Z(F)<=Z(T)&&F!==f)return tt(t,-5);if(v.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||v.lookahead!==0||F!==a&&v.status!==666){var L=v.strategy===2?function(C,W){for(var K;;){if(C.lookahead===0&&(st(C),C.lookahead===0)){if(W===a)return e;break}if(C.match_length=0,K=r._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,K&&(E(C,!1),C.strm.avail_out===0))return e}return C.insert=0,W===f?(E(C,!0),C.strm.avail_out===0?J:P):C.last_lit&&(E(C,!1),C.strm.avail_out===0)?e:D}(v,F):v.strategy===3?function(C,W){for(var K,M,X,it,rt=C.window;;){if(C.lookahead<=H){if(st(C),C.lookahead<=H&&W===a)return e;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=B&&0<C.strstart&&(M=rt[X=C.strstart-1])===rt[++X]&&M===rt[++X]&&M===rt[++X]){it=C.strstart+H;do;while(M===rt[++X]&&M===rt[++X]&&M===rt[++X]&&M===rt[++X]&&M===rt[++X]&&M===rt[++X]&&M===rt[++X]&&M===rt[++X]&&X<it);C.match_length=H-(it-X),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=B?(K=r._tr_tally(C,1,C.match_length-B),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(K=r._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),K&&(E(C,!1),C.strm.avail_out===0))return e}return C.insert=0,W===f?(E(C,!0),C.strm.avail_out===0?J:P):C.last_lit&&(E(C,!1),C.strm.avail_out===0)?e:D}(v,F):l[v.level].func(v,F);if(L!==J&&L!==P||(v.status=666),L===e||L===J)return t.avail_out===0&&(v.last_flush=-1),s;if(L===D&&(F===1?r._tr_align(v):F!==5&&(r._tr_stored_block(v,0,0,!1),F===3&&(Q(v.head),v.lookahead===0&&(v.strstart=0,v.block_start=0,v.insert=0))),z(t),t.avail_out===0))return v.last_flush=-1,s}return F!==f?s:v.wrap<=0?1:(v.wrap===2?(q(v,255&t.adler),q(v,t.adler>>8&255),q(v,t.adler>>16&255),q(v,t.adler>>24&255),q(v,255&t.total_in),q(v,t.total_in>>8&255),q(v,t.total_in>>16&255),q(v,t.total_in>>24&255)):(V(v,t.adler>>>16),V(v,65535&t.adler)),z(t),0<v.wrap&&(v.wrap=-v.wrap),v.pending!==0?s:1)},_.deflateEnd=function(t){var F;return t&&t.state?(F=t.state.status)!==w&&F!==69&&F!==73&&F!==91&&F!==103&&F!==R&&F!==666?tt(t,u):(t.state=null,F===R?tt(t,-3):s):u},_.deflateSetDictionary=function(t,F){var T,v,m,k,j,L,C,W,K=F.length;if(!t||!t.state||(k=(T=t.state).wrap)===2||k===1&&T.status!==w||T.lookahead)return u;for(k===1&&(t.adler=c(t.adler,F,K,0)),T.wrap=0,K>=T.w_size&&(k===0&&(Q(T.head),T.strstart=0,T.block_start=0,T.insert=0),W=new i.Buf8(T.w_size),i.arraySet(W,F,K-T.w_size,T.w_size,0),F=W,K=T.w_size),j=t.avail_in,L=t.next_in,C=t.input,t.avail_in=K,t.next_in=0,t.input=F,st(T);T.lookahead>=B;){for(v=T.strstart,m=T.lookahead-(B-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[v+B-1])&T.hash_mask,T.prev[v&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=v,v++,--m;);T.strstart=v,T.lookahead=B-1,st(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=B-1,T.match_available=0,t.next_in=L,t.input=C,t.avail_in=j,T.wrap=k,s},_.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,A,_){A.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,A,_){A.exports=function(l,i){var r,c,g,d,a,f,s,u,n,p,h,b,y,S,x,U,O,N,B,H,$,w,R,e,D;r=l.state,c=l.next_in,e=l.input,g=c+(l.avail_in-5),d=l.next_out,D=l.output,a=d-(i-l.avail_out),f=d+(l.avail_out-257),s=r.dmax,u=r.wsize,n=r.whave,p=r.wnext,h=r.window,b=r.hold,y=r.bits,S=r.lencode,x=r.distcode,U=(1<<r.lenbits)-1,O=(1<<r.distbits)-1;t:do{y<15&&(b+=e[c++]<<y,y+=8,b+=e[c++]<<y,y+=8),N=S[b&U];e:for(;;){if(b>>>=B=N>>>24,y-=B,(B=N>>>16&255)===0)D[d++]=65535&N;else{if(!(16&B)){if(!(64&B)){N=S[(65535&N)+(b&(1<<B)-1)];continue e}if(32&B){r.mode=12;break t}l.msg="invalid literal/length code",r.mode=30;break t}H=65535&N,(B&=15)&&(y<B&&(b+=e[c++]<<y,y+=8),H+=b&(1<<B)-1,b>>>=B,y-=B),y<15&&(b+=e[c++]<<y,y+=8,b+=e[c++]<<y,y+=8),N=x[b&O];r:for(;;){if(b>>>=B=N>>>24,y-=B,!(16&(B=N>>>16&255))){if(!(64&B)){N=x[(65535&N)+(b&(1<<B)-1)];continue r}l.msg="invalid distance code",r.mode=30;break t}if($=65535&N,y<(B&=15)&&(b+=e[c++]<<y,(y+=8)<B&&(b+=e[c++]<<y,y+=8)),s<($+=b&(1<<B)-1)){l.msg="invalid distance too far back",r.mode=30;break t}if(b>>>=B,y-=B,(B=d-a)<$){if(n<(B=$-B)&&r.sane){l.msg="invalid distance too far back",r.mode=30;break t}if(R=h,(w=0)===p){if(w+=u-B,B<H){for(H-=B;D[d++]=h[w++],--B;);w=d-$,R=D}}else if(p<B){if(w+=u+p-B,(B-=p)<H){for(H-=B;D[d++]=h[w++],--B;);if(w=0,p<H){for(H-=B=p;D[d++]=h[w++],--B;);w=d-$,R=D}}}else if(w+=p-B,B<H){for(H-=B;D[d++]=h[w++],--B;);w=d-$,R=D}for(;2<H;)D[d++]=R[w++],D[d++]=R[w++],D[d++]=R[w++],H-=3;H&&(D[d++]=R[w++],1<H&&(D[d++]=R[w++]))}else{for(w=d-$;D[d++]=D[w++],D[d++]=D[w++],D[d++]=D[w++],2<(H-=3););H&&(D[d++]=D[w++],1<H&&(D[d++]=D[w++]))}break}}break}}while(c<g&&d<f);c-=H=y>>3,b&=(1<<(y-=H<<3))-1,l.next_in=c,l.next_out=d,l.avail_in=c<g?g-c+5:5-(c-g),l.avail_out=d<f?f-d+257:257-(d-f),r.hold=b,r.bits=y}},{}],49:[function(o,A,_){var l=o("../utils/common"),i=o("./adler32"),r=o("./crc32"),c=o("./inffast"),g=o("./inftrees"),d=1,a=2,f=0,s=-2,u=1,n=852,p=592;function h(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(w){var R;return w&&w.state?(R=w.state,w.total_in=w.total_out=R.total=0,w.msg="",R.wrap&&(w.adler=1&R.wrap),R.mode=u,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new l.Buf32(n),R.distcode=R.distdyn=new l.Buf32(p),R.sane=1,R.back=-1,f):s}function S(w){var R;return w&&w.state?((R=w.state).wsize=0,R.whave=0,R.wnext=0,y(w)):s}function x(w,R){var e,D;return w&&w.state?(D=w.state,R<0?(e=0,R=-R):(e=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?s:(D.window!==null&&D.wbits!==R&&(D.window=null),D.wrap=e,D.wbits=R,S(w))):s}function U(w,R){var e,D;return w?(D=new b,(w.state=D).window=null,(e=x(w,R))!==f&&(w.state=null),e):s}var O,N,B=!0;function H(w){if(B){var R;for(O=new l.Buf32(512),N=new l.Buf32(32),R=0;R<144;)w.lens[R++]=8;for(;R<256;)w.lens[R++]=9;for(;R<280;)w.lens[R++]=7;for(;R<288;)w.lens[R++]=8;for(g(d,w.lens,0,288,O,0,w.work,{bits:9}),R=0;R<32;)w.lens[R++]=5;g(a,w.lens,0,32,N,0,w.work,{bits:5}),B=!1}w.lencode=O,w.lenbits=9,w.distcode=N,w.distbits=5}function $(w,R,e,D){var J,P=w.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new l.Buf8(P.wsize)),D>=P.wsize?(l.arraySet(P.window,R,e-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(D<(J=P.wsize-P.wnext)&&(J=D),l.arraySet(P.window,R,e-D,J,P.wnext),(D-=J)?(l.arraySet(P.window,R,e-D,D,0),P.wnext=D,P.whave=P.wsize):(P.wnext+=J,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=J))),0}_.inflateReset=S,_.inflateReset2=x,_.inflateResetKeep=y,_.inflateInit=function(w){return U(w,15)},_.inflateInit2=U,_.inflate=function(w,R){var e,D,J,P,tt,Z,Q,z,E,q,V,G,st,ut,et,nt,lt,at,ct,ft,t,F,T,v,m=0,k=new l.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&w.avail_in!==0)return s;(e=w.state).mode===12&&(e.mode=13),tt=w.next_out,J=w.output,Q=w.avail_out,P=w.next_in,D=w.input,Z=w.avail_in,z=e.hold,E=e.bits,q=Z,V=Q,F=f;t:for(;;)switch(e.mode){case u:if(e.wrap===0){e.mode=13;break}for(;E<16;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(2&e.wrap&&z===35615){k[e.check=0]=255&z,k[1]=z>>>8&255,e.check=r(e.check,k,2,0),E=z=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&z)<<8)+(z>>8))%31){w.msg="incorrect header check",e.mode=30;break}if((15&z)!=8){w.msg="unknown compression method",e.mode=30;break}if(E-=4,t=8+(15&(z>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){w.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,w.adler=e.check=1,e.mode=512&z?10:12,E=z=0;break;case 2:for(;E<16;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(e.flags=z,(255&e.flags)!=8){w.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){w.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=z>>8&1),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,e.check=r(e.check,k,2,0)),E=z=0,e.mode=3;case 3:for(;E<32;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}e.head&&(e.head.time=z),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,k[2]=z>>>16&255,k[3]=z>>>24&255,e.check=r(e.check,k,4,0)),E=z=0,e.mode=4;case 4:for(;E<16;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}e.head&&(e.head.xflags=255&z,e.head.os=z>>8),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,e.check=r(e.check,k,2,0)),E=z=0,e.mode=5;case 5:if(1024&e.flags){for(;E<16;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}e.length=z,e.head&&(e.head.extra_len=z),512&e.flags&&(k[0]=255&z,k[1]=z>>>8&255,e.check=r(e.check,k,2,0)),E=z=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(Z<(G=e.length)&&(G=Z),G&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),l.arraySet(e.head.extra,D,P,G,t)),512&e.flags&&(e.check=r(e.check,D,G,P)),Z-=G,P+=G,e.length-=G),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(Z===0)break t;for(G=0;t=D[P+G++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&G<Z;);if(512&e.flags&&(e.check=r(e.check,D,G,P)),Z-=G,P+=G,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(Z===0)break t;for(G=0;t=D[P+G++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&G<Z;);if(512&e.flags&&(e.check=r(e.check,D,G,P)),Z-=G,P+=G,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;E<16;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(z!==(65535&e.check)){w.msg="header crc mismatch",e.mode=30;break}E=z=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),w.adler=e.check=0,e.mode=12;break;case 10:for(;E<32;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}w.adler=e.check=h(z),E=z=0,e.mode=11;case 11:if(e.havedict===0)return w.next_out=tt,w.avail_out=Q,w.next_in=P,w.avail_in=Z,e.hold=z,e.bits=E,2;w.adler=e.check=1,e.mode=12;case 12:if(R===5||R===6)break t;case 13:if(e.last){z>>>=7&E,E-=7&E,e.mode=27;break}for(;E<3;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}switch(e.last=1&z,E-=1,3&(z>>>=1)){case 0:e.mode=14;break;case 1:if(H(e),e.mode=20,R!==6)break;z>>>=2,E-=2;break t;case 2:e.mode=17;break;case 3:w.msg="invalid block type",e.mode=30}z>>>=2,E-=2;break;case 14:for(z>>>=7&E,E-=7&E;E<32;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if((65535&z)!=(z>>>16^65535)){w.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&z,E=z=0,e.mode=15,R===6)break t;case 15:e.mode=16;case 16:if(G=e.length){if(Z<G&&(G=Z),Q<G&&(G=Q),G===0)break t;l.arraySet(J,D,P,G,tt),Z-=G,P+=G,Q-=G,tt+=G,e.length-=G;break}e.mode=12;break;case 17:for(;E<14;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(e.nlen=257+(31&z),z>>>=5,E-=5,e.ndist=1+(31&z),z>>>=5,E-=5,e.ncode=4+(15&z),z>>>=4,E-=4,286<e.nlen||30<e.ndist){w.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;E<3;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}e.lens[j[e.have++]]=7&z,z>>>=3,E-=3}for(;e.have<19;)e.lens[j[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,T={bits:e.lenbits},F=g(0,e.lens,0,19,e.lencode,0,e.work,T),e.lenbits=T.bits,F){w.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;nt=(m=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,lt=65535&m,!((et=m>>>24)<=E);){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(lt<16)z>>>=et,E-=et,e.lens[e.have++]=lt;else{if(lt===16){for(v=et+2;E<v;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(z>>>=et,E-=et,e.have===0){w.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],G=3+(3&z),z>>>=2,E-=2}else if(lt===17){for(v=et+3;E<v;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}E-=et,t=0,G=3+(7&(z>>>=et)),z>>>=3,E-=3}else{for(v=et+7;E<v;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}E-=et,t=0,G=11+(127&(z>>>=et)),z>>>=7,E-=7}if(e.have+G>e.nlen+e.ndist){w.msg="invalid bit length repeat",e.mode=30;break}for(;G--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){w.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,T={bits:e.lenbits},F=g(d,e.lens,0,e.nlen,e.lencode,0,e.work,T),e.lenbits=T.bits,F){w.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,T={bits:e.distbits},F=g(a,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,T),e.distbits=T.bits,F){w.msg="invalid distances set",e.mode=30;break}if(e.mode=20,R===6)break t;case 20:e.mode=21;case 21:if(6<=Z&&258<=Q){w.next_out=tt,w.avail_out=Q,w.next_in=P,w.avail_in=Z,e.hold=z,e.bits=E,c(w,V),tt=w.next_out,J=w.output,Q=w.avail_out,P=w.next_in,D=w.input,Z=w.avail_in,z=e.hold,E=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;nt=(m=e.lencode[z&(1<<e.lenbits)-1])>>>16&255,lt=65535&m,!((et=m>>>24)<=E);){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(nt&&!(240&nt)){for(at=et,ct=nt,ft=lt;nt=(m=e.lencode[ft+((z&(1<<at+ct)-1)>>at)])>>>16&255,lt=65535&m,!(at+(et=m>>>24)<=E);){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}z>>>=at,E-=at,e.back+=at}if(z>>>=et,E-=et,e.back+=et,e.length=lt,nt===0){e.mode=26;break}if(32&nt){e.back=-1,e.mode=12;break}if(64&nt){w.msg="invalid literal/length code",e.mode=30;break}e.extra=15&nt,e.mode=22;case 22:if(e.extra){for(v=e.extra;E<v;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}e.length+=z&(1<<e.extra)-1,z>>>=e.extra,E-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;nt=(m=e.distcode[z&(1<<e.distbits)-1])>>>16&255,lt=65535&m,!((et=m>>>24)<=E);){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(!(240&nt)){for(at=et,ct=nt,ft=lt;nt=(m=e.distcode[ft+((z&(1<<at+ct)-1)>>at)])>>>16&255,lt=65535&m,!(at+(et=m>>>24)<=E);){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}z>>>=at,E-=at,e.back+=at}if(z>>>=et,E-=et,e.back+=et,64&nt){w.msg="invalid distance code",e.mode=30;break}e.offset=lt,e.extra=15&nt,e.mode=24;case 24:if(e.extra){for(v=e.extra;E<v;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}e.offset+=z&(1<<e.extra)-1,z>>>=e.extra,E-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){w.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(Q===0)break t;if(G=V-Q,e.offset>G){if((G=e.offset-G)>e.whave&&e.sane){w.msg="invalid distance too far back",e.mode=30;break}st=G>e.wnext?(G-=e.wnext,e.wsize-G):e.wnext-G,G>e.length&&(G=e.length),ut=e.window}else ut=J,st=tt-e.offset,G=e.length;for(Q<G&&(G=Q),Q-=G,e.length-=G;J[tt++]=ut[st++],--G;);e.length===0&&(e.mode=21);break;case 26:if(Q===0)break t;J[tt++]=e.length,Q--,e.mode=21;break;case 27:if(e.wrap){for(;E<32;){if(Z===0)break t;Z--,z|=D[P++]<<E,E+=8}if(V-=Q,w.total_out+=V,e.total+=V,V&&(w.adler=e.check=e.flags?r(e.check,J,V,tt-V):i(e.check,J,V,tt-V)),V=Q,(e.flags?z:h(z))!==e.check){w.msg="incorrect data check",e.mode=30;break}E=z=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;E<32;){if(Z===0)break t;Z--,z+=D[P++]<<E,E+=8}if(z!==(4294967295&e.total)){w.msg="incorrect length check",e.mode=30;break}E=z=0}e.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return s}return w.next_out=tt,w.avail_out=Q,w.next_in=P,w.avail_in=Z,e.hold=z,e.bits=E,(e.wsize||V!==w.avail_out&&e.mode<30&&(e.mode<27||R!==4))&&$(w,w.output,w.next_out,V-w.avail_out)?(e.mode=31,-4):(q-=w.avail_in,V-=w.avail_out,w.total_in+=q,w.total_out+=V,e.total+=V,e.wrap&&V&&(w.adler=e.check=e.flags?r(e.check,J,V,w.next_out-V):i(e.check,J,V,w.next_out-V)),w.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(q==0&&V===0||R===4)&&F===f&&(F=-5),F)},_.inflateEnd=function(w){if(!w||!w.state)return s;var R=w.state;return R.window&&(R.window=null),w.state=null,f},_.inflateGetHeader=function(w,R){var e;return w&&w.state&&2&(e=w.state).wrap?((e.head=R).done=!1,f):s},_.inflateSetDictionary=function(w,R){var e,D=R.length;return w&&w.state?(e=w.state).wrap!==0&&e.mode!==11?s:e.mode===11&&i(1,R,D,0)!==e.check?-3:$(w,R,D,D)?(e.mode=31,-4):(e.havedict=1,f):s},_.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,A,_){var l=o("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];A.exports=function(d,a,f,s,u,n,p,h){var b,y,S,x,U,O,N,B,H,$=h.bits,w=0,R=0,e=0,D=0,J=0,P=0,tt=0,Z=0,Q=0,z=0,E=null,q=0,V=new l.Buf16(16),G=new l.Buf16(16),st=null,ut=0;for(w=0;w<=15;w++)V[w]=0;for(R=0;R<s;R++)V[a[f+R]]++;for(J=$,D=15;1<=D&&V[D]===0;D--);if(D<J&&(J=D),D===0)return u[n++]=20971520,u[n++]=20971520,h.bits=1,0;for(e=1;e<D&&V[e]===0;e++);for(J<e&&(J=e),w=Z=1;w<=15;w++)if(Z<<=1,(Z-=V[w])<0)return-1;if(0<Z&&(d===0||D!==1))return-1;for(G[1]=0,w=1;w<15;w++)G[w+1]=G[w]+V[w];for(R=0;R<s;R++)a[f+R]!==0&&(p[G[a[f+R]]++]=R);if(O=d===0?(E=st=p,19):d===1?(E=i,q-=257,st=r,ut-=257,256):(E=c,st=g,-1),w=e,U=n,tt=R=z=0,S=-1,x=(Q=1<<(P=J))-1,d===1&&852<Q||d===2&&592<Q)return 1;for(;;){for(N=w-tt,H=p[R]<O?(B=0,p[R]):p[R]>O?(B=st[ut+p[R]],E[q+p[R]]):(B=96,0),b=1<<w-tt,e=y=1<<P;u[U+(z>>tt)+(y-=b)]=N<<24|B<<16|H|0,y!==0;);for(b=1<<w-1;z&b;)b>>=1;if(b!==0?(z&=b-1,z+=b):z=0,R++,--V[w]==0){if(w===D)break;w=a[f+p[R]]}if(J<w&&(z&x)!==S){for(tt===0&&(tt=J),U+=e,Z=1<<(P=w-tt);P+tt<D&&!((Z-=V[P+tt])<=0);)P++,Z<<=1;if(Q+=1<<P,d===1&&852<Q||d===2&&592<Q)return 1;u[S=z&x]=J<<24|P<<16|U-n|0}}return z!==0&&(u[U+z]=w-tt<<24|64<<16|0),h.bits=J,0}},{"../utils/common":41}],51:[function(o,A,_){A.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,A,_){var l=o("../utils/common"),i=0,r=1;function c(m){for(var k=m.length;0<=--k;)m[k]=0}var g=0,d=29,a=256,f=a+1+d,s=30,u=19,n=2*f+1,p=15,h=16,b=7,y=256,S=16,x=17,U=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(f+2));c($);var w=new Array(2*s);c(w);var R=new Array(512);c(R);var e=new Array(256);c(e);var D=new Array(d);c(D);var J,P,tt,Z=new Array(s);function Q(m,k,j,L,C){this.static_tree=m,this.extra_bits=k,this.extra_base=j,this.elems=L,this.max_length=C,this.has_stree=m&&m.length}function z(m,k){this.dyn_tree=m,this.max_code=0,this.stat_desc=k}function E(m){return m<256?R[m]:R[256+(m>>>7)]}function q(m,k){m.pending_buf[m.pending++]=255&k,m.pending_buf[m.pending++]=k>>>8&255}function V(m,k,j){m.bi_valid>h-j?(m.bi_buf|=k<<m.bi_valid&65535,q(m,m.bi_buf),m.bi_buf=k>>h-m.bi_valid,m.bi_valid+=j-h):(m.bi_buf|=k<<m.bi_valid&65535,m.bi_valid+=j)}function G(m,k,j){V(m,j[2*k],j[2*k+1])}function st(m,k){for(var j=0;j|=1&m,m>>>=1,j<<=1,0<--k;);return j>>>1}function ut(m,k,j){var L,C,W=new Array(p+1),K=0;for(L=1;L<=p;L++)W[L]=K=K+j[L-1]<<1;for(C=0;C<=k;C++){var M=m[2*C+1];M!==0&&(m[2*C]=st(W[M]++,M))}}function et(m){var k;for(k=0;k<f;k++)m.dyn_ltree[2*k]=0;for(k=0;k<s;k++)m.dyn_dtree[2*k]=0;for(k=0;k<u;k++)m.bl_tree[2*k]=0;m.dyn_ltree[2*y]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function nt(m){8<m.bi_valid?q(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function lt(m,k,j,L){var C=2*k,W=2*j;return m[C]<m[W]||m[C]===m[W]&&L[k]<=L[j]}function at(m,k,j){for(var L=m.heap[j],C=j<<1;C<=m.heap_len&&(C<m.heap_len&&lt(k,m.heap[C+1],m.heap[C],m.depth)&&C++,!lt(k,L,m.heap[C],m.depth));)m.heap[j]=m.heap[C],j=C,C<<=1;m.heap[j]=L}function ct(m,k,j){var L,C,W,K,M=0;if(m.last_lit!==0)for(;L=m.pending_buf[m.d_buf+2*M]<<8|m.pending_buf[m.d_buf+2*M+1],C=m.pending_buf[m.l_buf+M],M++,L===0?G(m,C,k):(G(m,(W=e[C])+a+1,k),(K=O[W])!==0&&V(m,C-=D[W],K),G(m,W=E(--L),j),(K=N[W])!==0&&V(m,L-=Z[W],K)),M<m.last_lit;);G(m,y,k)}function ft(m,k){var j,L,C,W=k.dyn_tree,K=k.stat_desc.static_tree,M=k.stat_desc.has_stree,X=k.stat_desc.elems,it=-1;for(m.heap_len=0,m.heap_max=n,j=0;j<X;j++)W[2*j]!==0?(m.heap[++m.heap_len]=it=j,m.depth[j]=0):W[2*j+1]=0;for(;m.heap_len<2;)W[2*(C=m.heap[++m.heap_len]=it<2?++it:0)]=1,m.depth[C]=0,m.opt_len--,M&&(m.static_len-=K[2*C+1]);for(k.max_code=it,j=m.heap_len>>1;1<=j;j--)at(m,W,j);for(C=X;j=m.heap[1],m.heap[1]=m.heap[m.heap_len--],at(m,W,1),L=m.heap[1],m.heap[--m.heap_max]=j,m.heap[--m.heap_max]=L,W[2*C]=W[2*j]+W[2*L],m.depth[C]=(m.depth[j]>=m.depth[L]?m.depth[j]:m.depth[L])+1,W[2*j+1]=W[2*L+1]=C,m.heap[1]=C++,at(m,W,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(rt,ht){var bt,dt,yt,ot,kt,Ct,mt=ht.dyn_tree,zt=ht.max_code,jt=ht.stat_desc.static_tree,Lt=ht.stat_desc.has_stree,Pt=ht.stat_desc.extra_bits,Tt=ht.stat_desc.extra_base,wt=ht.stat_desc.max_length,xt=0;for(ot=0;ot<=p;ot++)rt.bl_count[ot]=0;for(mt[2*rt.heap[rt.heap_max]+1]=0,bt=rt.heap_max+1;bt<n;bt++)wt<(ot=mt[2*mt[2*(dt=rt.heap[bt])+1]+1]+1)&&(ot=wt,xt++),mt[2*dt+1]=ot,zt<dt||(rt.bl_count[ot]++,kt=0,Tt<=dt&&(kt=Pt[dt-Tt]),Ct=mt[2*dt],rt.opt_len+=Ct*(ot+kt),Lt&&(rt.static_len+=Ct*(jt[2*dt+1]+kt)));if(xt!==0){do{for(ot=wt-1;rt.bl_count[ot]===0;)ot--;rt.bl_count[ot]--,rt.bl_count[ot+1]+=2,rt.bl_count[wt]--,xt-=2}while(0<xt);for(ot=wt;ot!==0;ot--)for(dt=rt.bl_count[ot];dt!==0;)zt<(yt=rt.heap[--bt])||(mt[2*yt+1]!==ot&&(rt.opt_len+=(ot-mt[2*yt+1])*mt[2*yt],mt[2*yt+1]=ot),dt--)}}(m,k),ut(W,it,m.bl_count)}function t(m,k,j){var L,C,W=-1,K=k[1],M=0,X=7,it=4;for(K===0&&(X=138,it=3),k[2*(j+1)+1]=65535,L=0;L<=j;L++)C=K,K=k[2*(L+1)+1],++M<X&&C===K||(M<it?m.bl_tree[2*C]+=M:C!==0?(C!==W&&m.bl_tree[2*C]++,m.bl_tree[2*S]++):M<=10?m.bl_tree[2*x]++:m.bl_tree[2*U]++,W=C,it=(M=0)===K?(X=138,3):C===K?(X=6,3):(X=7,4))}function F(m,k,j){var L,C,W=-1,K=k[1],M=0,X=7,it=4;for(K===0&&(X=138,it=3),L=0;L<=j;L++)if(C=K,K=k[2*(L+1)+1],!(++M<X&&C===K)){if(M<it)for(;G(m,C,m.bl_tree),--M!=0;);else C!==0?(C!==W&&(G(m,C,m.bl_tree),M--),G(m,S,m.bl_tree),V(m,M-3,2)):M<=10?(G(m,x,m.bl_tree),V(m,M-3,3)):(G(m,U,m.bl_tree),V(m,M-11,7));W=C,it=(M=0)===K?(X=138,3):C===K?(X=6,3):(X=7,4)}}c(Z);var T=!1;function v(m,k,j,L){V(m,(g<<1)+(L?1:0),3),function(C,W,K,M){nt(C),M&&(q(C,K),q(C,~K)),l.arraySet(C.pending_buf,C.window,W,K,C.pending),C.pending+=K}(m,k,j,!0)}_._tr_init=function(m){T||(function(){var k,j,L,C,W,K=new Array(p+1);for(C=L=0;C<d-1;C++)for(D[C]=L,k=0;k<1<<O[C];k++)e[L++]=C;for(e[L-1]=C,C=W=0;C<16;C++)for(Z[C]=W,k=0;k<1<<N[C];k++)R[W++]=C;for(W>>=7;C<s;C++)for(Z[C]=W<<7,k=0;k<1<<N[C]-7;k++)R[256+W++]=C;for(j=0;j<=p;j++)K[j]=0;for(k=0;k<=143;)$[2*k+1]=8,k++,K[8]++;for(;k<=255;)$[2*k+1]=9,k++,K[9]++;for(;k<=279;)$[2*k+1]=7,k++,K[7]++;for(;k<=287;)$[2*k+1]=8,k++,K[8]++;for(ut($,f+1,K),k=0;k<s;k++)w[2*k+1]=5,w[2*k]=st(k,5);J=new Q($,O,a+1,f,p),P=new Q(w,N,0,s,p),tt=new Q(new Array(0),B,0,u,b)}(),T=!0),m.l_desc=new z(m.dyn_ltree,J),m.d_desc=new z(m.dyn_dtree,P),m.bl_desc=new z(m.bl_tree,tt),m.bi_buf=0,m.bi_valid=0,et(m)},_._tr_stored_block=v,_._tr_flush_block=function(m,k,j,L){var C,W,K=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(M){var X,it=4093624447;for(X=0;X<=31;X++,it>>>=1)if(1&it&&M.dyn_ltree[2*X]!==0)return i;if(M.dyn_ltree[18]!==0||M.dyn_ltree[20]!==0||M.dyn_ltree[26]!==0)return r;for(X=32;X<a;X++)if(M.dyn_ltree[2*X]!==0)return r;return i}(m)),ft(m,m.l_desc),ft(m,m.d_desc),K=function(M){var X;for(t(M,M.dyn_ltree,M.l_desc.max_code),t(M,M.dyn_dtree,M.d_desc.max_code),ft(M,M.bl_desc),X=u-1;3<=X&&M.bl_tree[2*H[X]+1]===0;X--);return M.opt_len+=3*(X+1)+5+5+4,X}(m),C=m.opt_len+3+7>>>3,(W=m.static_len+3+7>>>3)<=C&&(C=W)):C=W=j+5,j+4<=C&&k!==-1?v(m,k,j,L):m.strategy===4||W===C?(V(m,2+(L?1:0),3),ct(m,$,w)):(V(m,4+(L?1:0),3),function(M,X,it,rt){var ht;for(V(M,X-257,5),V(M,it-1,5),V(M,rt-4,4),ht=0;ht<rt;ht++)V(M,M.bl_tree[2*H[ht]+1],3);F(M,M.dyn_ltree,X-1),F(M,M.dyn_dtree,it-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,K+1),ct(m,m.dyn_ltree,m.dyn_dtree)),et(m),L&&nt(m)},_._tr_tally=function(m,k,j){return m.pending_buf[m.d_buf+2*m.last_lit]=k>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&k,m.pending_buf[m.l_buf+m.last_lit]=255&j,m.last_lit++,k===0?m.dyn_ltree[2*j]++:(m.matches++,k--,m.dyn_ltree[2*(e[j]+a+1)]++,m.dyn_dtree[2*E(k)]++),m.last_lit===m.lit_bufsize-1},_._tr_align=function(m){V(m,2,3),G(m,y,$),function(k){k.bi_valid===16?(q(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(o,A,_){A.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,A,_){(function(l){(function(i,r){if(!i.setImmediate){var c,g,d,a,f=1,s={},u=!1,n=i.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(i);p=p&&p.setTimeout?p:i,c={}.toString.call(i.process)==="[object process]"?function(S){process.nextTick(function(){b(S)})}:function(){if(i.postMessage&&!i.importScripts){var S=!0,x=i.onmessage;return i.onmessage=function(){S=!1},i.postMessage("","*"),i.onmessage=x,S}}()?(a="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",y,!1):i.attachEvent("onmessage",y),function(S){i.postMessage(a+S,"*")}):i.MessageChannel?((d=new MessageChannel).port1.onmessage=function(S){b(S.data)},function(S){d.port2.postMessage(S)}):n&&"onreadystatechange"in n.createElement("script")?(g=n.documentElement,function(S){var x=n.createElement("script");x.onreadystatechange=function(){b(S),x.onreadystatechange=null,g.removeChild(x),x=null},g.appendChild(x)}):function(S){setTimeout(b,0,S)},p.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var x=new Array(arguments.length-1),U=0;U<x.length;U++)x[U]=arguments[U+1];var O={callback:S,args:x};return s[f]=O,c(f),f++},p.clearImmediate=h}function h(S){delete s[S]}function b(S){if(u)setTimeout(b,0,S);else{var x=s[S];if(x){u=!0;try{(function(U){var O=U.callback,N=U.args;switch(N.length){case 0:O();break;case 1:O(N[0]);break;case 2:O(N[0],N[1]);break;case 3:O(N[0],N[1],N[2]);break;default:O.apply(r,N)}})(x)}finally{h(S),u=!1}}}}function y(S){S.source===i&&typeof S.data=="string"&&S.data.indexOf(a)===0&&b(+S.data.slice(a.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof _t<"u"?_t:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Dt);var qt=Dt.exports;const $t=Gt(qt);async function Qt(Y){return(await fetch(Y)).arrayBuffer()}function It(Y,I){const o=new URL(I,new URL(Y,"resolve://"));if(o.protocol==="resolve:"){const{pathname:A,search:_,hash:l}=o;return A+_+l}return o.toString()}function Ut(Y){return gt.dirname(Y)}function Jt(Y){return gt.basename(Y)}function te(Y){return gt.extname(Y)}const Et={};async function ae(Y,I){const o=new $t;for(const _ of I)if(_.assetType==="game.json")o.file(_.filename,_.value);else if(_.assetType==="script"||_.assetType==="text"){const l=o.folder(gt.dirname(_.path));if(!l)continue;l.file(_.filename,_.value)}else if(_.assetType==="image"||_.assetType==="vector-image"){const l=o.folder(gt.dirname(_.path));if(!l)continue;l.file(_.filename,_.blob,{binary:!0})}else if(_.assetType==="audio")try{const l=o.folder(gt.dirname(_.path));if(!l)continue;for(const i of _.hint.extensions){const r=_.filename+i;Et[r]||(Et[r]=await Qt(At(Ut(_.uri),r))),l.file(r,Et[r],{binary:!0})}}catch(l){console.error(l)}else if(_.assetType==="binary"){const l=o.folder(gt.dirname(_.path));if(!l)continue;l.file(_.filename,_.blob,{binary:!0})}const A=await o.generateAsync({type:"blob"});Xt.saveAs(A,Y)}const ee="1",re=[{version:"3.21.1",name:"akashic-engine-standalone-3.21.1.js"}],Ot={version:ee,akashicEngineVersions:re},oe=Symbol("useGameContext");function le(){const Y=({type:a,name:f,message:s})=>{d.consoleValues.unshift({type:a,name:f,message:s})};function I(a){Y({type:"error",name:a.toString(),message:a.message})}function o(a){Y({type:"error",name:a.toString(),message:a.reason})}const A=a=>{const f=a;f.removeEventListener("error",I),f.addEventListener("error",I),f.removeEventListener("unhandledrejection",o),f.addEventListener("unhandledrejection",o)},_=()=>{d.consoleValues.splice(0,d.consoleValues.length),d.consoleValues.push({type:"info",name:"TODO",message:"This console only showing error log"})},l=a=>{d.canvas=a};let i=null;const r=async(a,f,s)=>{if(console.log("game.json",a),!a)throw new Error("Game Configuration not given");if(!d.canvas)throw new Error("canvas not found");if(!d.currentVersion)throw new Error("no currentVersion");i&&(i(),i=null),_(),await g(d.currentVersion),i=AE.initialize({canvas:d.canvas,configuration:a,assetBaseDir:s??void 0,assetLoaderFuncs:{loadScriptAsset:(u,n,p)=>{const h=f.find(b=>b.assetType==="script"&&b.id===u);h&&h.assetType==="script"?p(null,h.value):p(new Error(`script asset (id: "${n}") was not found`),void 0)}}}),d.running=!0},c=()=>{i&&(i(),i=null),d.running=!1},g=a=>new Promise((f,s)=>{const u=document.getElementsByTagName("head")[0],n=document.createElement("script"),p="aks-engine-elem",h=d.versions.akashicEngineVersions.find(y=>y.version===a);if(!h){s(new Error(`version ${a} not found`));return}const b=`engine/${h.name}`;n.setAttribute("src",b),n.setAttribute("id",p),u.appendChild(n),n.onerror=y=>{u.removeChild(n),s(y)},n.onload=function(){u.removeChild(n),f()}}),d=Rt({running:!1,consoleValues:[],canvas:null,currentVersion:Ot.akashicEngineVersions[0].version,versions:Ot,handleErrors:A,requireEngineJS:g,setCanvas:l,clearConsole:_,addConsole:Y,run:r,stop:c});return _(),Vt(()=>{c()}),d}const ue=Symbol("useGameJSONResolver");function he(){const Y=async a=>(await fetch(a)).json(),I=async a=>{const f=await Y(a);return o(f,Ut(a))},o=async(a,f)=>{const s={...a.assets},u=Object.keys(s).map(y=>({id:y,...s[y]})),n="http://127.0.0.1",p=It(n,a.main),h=u.find(y=>It(n,y.path)===p),b=(await Promise.all(u.map(y=>A(y.id,y,f)))).sort((y,S)=>{const x=["script","text","image","vector-image","audio","binary","unknown"];return x.indexOf(y.assetType)-x.indexOf(S.assetType)});if(a.globalScripts){const y=g(a.globalScripts),S=await Promise.all(y.map(x=>A(x.assetId,x,f)));b.push(...S)}if(b.unshift({assetType:"game.json",name:"game.json",filename:"game.json",editorType:"text",uri:At(f,"game.json"),path:"game.json",language:"json",value:JSON.stringify(a,void 0,2)}),console.log("=== resolved game.json ==="),console.log("  - game.json",a),console.log("  - pseudoFiles",b),a.title&&(d.title=a.title),a.description&&(d.description=a.description),d.pseudoFiles.splice(0,d.pseudoFiles.length),d.pseudoFiles.push(...b),d.entryAssetUri=h?At(f,h.path):null,d.title=a.title,d.description=a.description,d.assetBase=f,d.moduleMainScripts={...a.moduleMainScripts},d.width=a.width,d.height=a.height,d.fps=a.fps||30,d.dependencies=["g","@akashic/trigger","@akashic/playlog","@akashic/pdi-types"],a.moduleMainScripts){const y=Object.keys(a.moduleMainScripts);d.dependencies.push(...y)}},A=async(a,f,s)=>{const u=At(s,f.path),n=Jt(f.path),p=!!f.global;if(f.type==="script"){const h=await(await fetch(u)).text(),b=f.path===a,y=b,S=b;return{id:a,name:a,uri:u,assetType:f.type,editorType:"text",path:f.path,filename:n,language:"javascript",value:h,global:p,hidden:y,readOnly:S}}else if(f.type==="text"){const h=await(await fetch(u)).text();return{id:a,name:a,uri:u,assetType:f.type,editorType:"text",path:f.path,filename:n,language:te(u)===".json"?"json":"text",value:h,global:p}}else if(f.type==="image"||f.type==="vector-image"){const h=await(await fetch(u)).blob();return{id:a,name:a,uri:u,assetType:f.type,editorType:"image",path:f.path,filename:n,blob:h,width:f.width,height:f.height,hint:f.hint,global:p}}else if(f.type==="audio"){const h=f.hint?{...f.hint}:{extensions:void 0};return h.extensions??(h.extensions=[".ogg",".aac"]),{id:a,name:a,uri:u,assetType:f.type,editorType:"audio",path:f.path,filename:n,duration:f.duration||0,hint:h,systemId:f.systemId,loop:!!f.loop,global:p}}else if(f.type==="binary"){const h=await(await fetch(u)).blob();return{id:a,name:a,uri:u,assetType:f.type,editorType:"binary",path:f.path,filename:n,blob:h,global:p}}else return{id:a,uri:u,name:a,filename:n,assetType:"unknown",editorType:"unknown",path:f.path,global:p}},_=a=>{a&&(d.width=a.width,d.height=a.height,d.fps=a.fps||30);const f={width:d.width,height:d.height,fps:d.fps,main:"",assets:{},moduleMainScripts:d.moduleMainScripts};for(let s=0;s<d.pseudoFiles.length;s++){const u=d.pseudoFiles[s];if(u.assetType==="script")f.assets[u.id]={type:"script",path:u.path,global:u.global},d.entryAssetUri===u.uri&&(f.main="./"+u.path);else if(u.assetType==="text")f.assets[u.id]={type:"text",path:u.path,global:u.global};else if(u.assetType==="image")f.assets[u.id]={type:"image",path:u.path,width:u.width,height:u.height,hint:u.hint,global:u.global};else if(u.assetType==="vector-image")f.assets[u.id]={type:"vector-image",path:u.path,width:u.width,height:u.height,hint:u.hint,global:u.global};else if(u.assetType==="audio"){const n=u.hint?{...u.hint}:{extensions:void 0};n.extensions??(n.extensions=[".ogg",".aac"]),f.assets[u.id]={type:"audio",path:u.path,duration:u.duration,systemId:u.systemId,hint:n,global:u.global}}else u.assetType==="binary"&&(f.assets[u.id]={type:"binary",path:u.path,global:u.global})}return ne(f)},l=async(a,f,s)=>{const u=await A(a,f,s);d.pseudoFiles.push(u)},i=a=>{d.pseudoFiles.some((f,s)=>{if(f.assetType!=="game.json"&&f.id===a)return d.pseudoFiles.splice(s,1),!0})},r=async(a,f,s)=>{d.moduleMainScripts[a]=f[0];const u=g(f);for(const n of u)await l(n.assetId,n,s);d.dependencies.indexOf(a)===-1&&d.dependencies.push(a)},c=(a,f)=>{delete d.moduleMainScripts[a];for(const u of f)i(u);const s=d.dependencies.indexOf(a);s!==-1&&d.dependencies.splice(s,1)},g=a=>a.map(f=>({type:"script",assetId:f,path:f,global:!0})),d=Rt({width:320,height:320,fps:30,pseudoFiles:[],entryAssetUri:null,assetBase:null,title:void 0,description:void 0,moduleMainScripts:{},dependencies:[],getGameJSONFromUri:Y,fetchPseudoFilesFromUri:I,fetchPseudoFilesFromGameJSON:o,generateGameJSON:_,addAsset:l,removeAsset:i,addExtraModule:r,removeExtraModule:c});return d}function ne(Y){if(Y.globalScripts&&Y.globalScripts.length){for(let I=0;I<Y.globalScripts.length;I++)Y.assets[Y.globalScripts[I]]={type:"script",path:Y.globalScripts[I],global:!0};delete Y.globalScripts}return Y}export{se as B,le as a,oe as b,ue as c,ae as d,Ut as e,Jt as f,he as u};
