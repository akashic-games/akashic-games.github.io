import{d as C,p as _,j as N,c,g as l,a as e,n as g,l as v,v as y,b as d,u as f,o as i,h as w,i as P,_ as S}from"./index-bae31a55.js";import{A as T,D as k,G as B}from"./GameController-b40caca0.js";import{u as F,a as x,c as G,b as D}from"./useGameJSONResolver-ed557dbe.js";const h=r=>(w("data-v-388565c7"),r=r(),P(),r),J={class:"snippet-page-container"},O=h(()=>e("span",{class:"text"},"コードを実行",-1)),A=h(()=>e("span",{class:"icon"},[e("i",{class:"material-icons md-120"},"play_arrow")],-1)),E=[O,A],I={key:1,class:"container-page-tab"},R={class:"container-agv"},U={class:"container-editor"},V={key:2,class:"container-download"},j=C({__name:"SnippetPage",props:{gameJsonUri:{},name:{},autoplay:{type:Boolean,default:!1},showDownloadButton:{type:Boolean,default:!0},showTab:{type:Boolean,default:!0}},setup(r){const o=r,a=F(),p=x();_(G,a),_(D,p);const s=N({currentPageTabName:"code",ready:o.autoplay,processingAsZip:!1}),u=async()=>{await a.fetchPseudoFilesFromUri(o.gameJsonUri);const t=a.pseudoFiles.find(({assetType:n})=>n==="game.json");p.run(a.generateGameJSON(t&&t.editorType==="text"?JSON.parse(t.value):void 0),a.pseudoFiles,a.assetBase),s.currentPageTabName="game",s.ready=!0},m=t=>{s.currentPageTabName=t};return o.autoplay&&u(),(t,n)=>(i(),c("div",J,[s.ready?l("",!0):(i(),c("div",{key:0,class:"container-overlay pointer",onClick:u},E)),o.showTab?(i(),c("div",I,[e("ul",null,[e("li",{class:g(["page-tab",{active:s.currentPageTabName==="code"}])},[e("a",{onClick:n[0]||(n[0]=b=>m("code"))},"CODE")],2),e("li",{class:g(["page-tab",{active:s.currentPageTabName==="game"}])},[e("a",{onClick:n[1]||(n[1]=b=>m("game"))},"GAME")],2)])])):l("",!0),v(e("div",R,[d(B,{ref:"gameContollerRef"},null,512)],512),[[y,s.currentPageTabName==="game"]]),v(e("div",U,[d(T,{pseudoFiles:f(a).pseudoFiles},null,8,["pseudoFiles"])],512),[[y,s.currentPageTabName==="code"]]),o.showDownloadButton?(i(),c("div",V,[d(k,{pseudoFiles:f(a).pseudoFiles,name:o.name+"."+Date.now()},null,8,["pseudoFiles","name"])])):l("",!0)]))}});const M=S(j,[["__scopeId","data-v-388565c7"],["__file","SnippetPage.vue"]]);export{M as default};
