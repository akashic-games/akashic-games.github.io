import{_ as n,C as e,o as l,c as p,H as o,Q as s}from"./chunks/framework.459ab1e9.js";const m=JSON.parse('{"title":"ゲームにアセットを追加する","description":"","frontmatter":{},"headers":[],"relativePath":"reverse-reference/v3/asset/add-asset.md","filePath":"reverse-reference/v3/asset/add-asset.md"}'),t={name:"reverse-reference/v3/asset/add-asset.md"},c=s('<h1 id="ゲームにアセットを追加する" tabindex="-1">ゲームにアセットを追加する <a class="header-anchor" href="#ゲームにアセットを追加する" aria-label="Permalink to &quot;ゲームにアセットを追加する&quot;">​</a></h1><p>ゲームにアセットを追加するには、指定ディレクトリにファイルを追加後 <code>akashic scan asset</code> コマンドを実行します。</p><h2 id="凡例" tabindex="-1">凡例 <a class="header-anchor" href="#凡例" aria-label="Permalink to &quot;凡例&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">akashic</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scan</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">asset</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">akashic</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scan</span><span style="color:#24292E;"> </span><span style="color:#032F62;">asset</span></span></code></pre></div><p>ゲームからアセットを削除する場合は <a href="./remove-asset.html">こちら</a> を参照してください。</p><h2 id="利用例" tabindex="-1">利用例 <a class="header-anchor" href="#利用例" aria-label="Permalink to &quot;利用例&quot;">​</a></h2><p>次のコンテンツは、画像を表示します。</p>',7),r=s(`<h2 id="詳細" tabindex="-1">詳細 <a class="header-anchor" href="#詳細" aria-label="Permalink to &quot;詳細&quot;">​</a></h2><p>アセットを追加するには、指定ディレクトリに配置し、<code>akashic scan asset</code> コマンドを実行します。 <code>akashic scan asset</code> コマンドを実行すると、上記のディレクトリ内に新しいファイルが見つかった場合は <code>game.json</code> に登録し、ディレクトリからファイルが削除された場合は <code>game.json</code> から登録を解除します。 追加するファイルの種類により配置するディレクトリが下記のように決まっています。</p><table><thead><tr><th style="text-align:center;">名前</th><th style="text-align:left;">役割</th></tr></thead><tbody><tr><td style="text-align:center;"><code>script</code></td><td style="text-align:left;">JavaScriptのコードを配置する</td></tr><tr><td style="text-align:center;"><code>image</code></td><td style="text-align:left;">PNG形式またはJPEG形式の画像を配置する</td></tr><tr><td style="text-align:center;"><code>audio</code></td><td style="text-align:left;">OGG形式とM4A形式(あるいはAAC形式)のオーディオファイルを配置する</td></tr><tr><td style="text-align:center;"><code>text</code></td><td style="text-align:left;">その他のデータ(テキスト形式)を配置する</td></tr><tr><td style="text-align:center;"><code>assets</code></td><td style="text-align:left;">上記 4 種類全てのアセットを配置できる<br>(詳細は <a href="./../../../tutorial/v3/assetPaths.html">複数アセットをまとめて扱う</a> を参照)</td></tr></tbody></table><p>画像ファイルの <code>player.png</code> を <code>image</code> ディレクトリに置いて <code>akashic scan asset</code> コマンドを実行すると、画面に以下のように表示されます。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">INFO:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Added</span><span style="color:#E1E4E8;"> (or </span><span style="color:#9ECBFF;">updated</span><span style="color:#E1E4E8;">) the declaration </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> player (</span><span style="color:#B392F0;">image/player.png</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#B392F0;">INFO:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Done!</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">INFO:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Added</span><span style="color:#24292E;"> (or </span><span style="color:#032F62;">updated</span><span style="color:#24292E;">) the declaration </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> player (</span><span style="color:#6F42C1;">image/player.png</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6F42C1;">INFO:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Done!</span></span></code></pre></div><p><code>game.json</code> には以下の項目が <code>assets</code> プロパティに追加されます。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">&quot;player&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;image&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;width&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">63</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;height&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;path&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;image/player.png&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">&quot;player&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;image&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;width&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">63</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;height&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">53</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;path&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;image/player.png&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>game.json</code> に登録されたアセット ID を利用し、シーン内でアセットを利用することができます。 アセット ID は <code>game.json</code> に登録されている名前です。 これはアセットを <code>akashic scan</code> で登録した場合は、ファイル名から拡張子をのぞいた文字列になっています。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">main</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> scene </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> g.</span><span style="color:#B392F0;">Scene</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    game: g.game,</span></span>
<span class="line"><span style="color:#E1E4E8;">    assetIds: [</span><span style="color:#9ECBFF;">&quot;player&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#6A737D;">// シーン内で利用するアセットID</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  scene.onLoad.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> sprite </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> g.</span><span style="color:#B392F0;">Sprite</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      scene: scene,</span></span>
<span class="line"><span style="color:#E1E4E8;">      src: scene.asset.</span><span style="color:#B392F0;">getImageById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;player&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    scene.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(sprite);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">  g.game.</span><span style="color:#B392F0;">pushScene</span><span style="color:#E1E4E8;">(scene);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> scene </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> g.</span><span style="color:#6F42C1;">Scene</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    game: g.game,</span></span>
<span class="line"><span style="color:#24292E;">    assetIds: [</span><span style="color:#032F62;">&quot;player&quot;</span><span style="color:#24292E;">] </span><span style="color:#6A737D;">// シーン内で利用するアセットID</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  scene.onLoad.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">function</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> sprite </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> g.</span><span style="color:#6F42C1;">Sprite</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      scene: scene,</span></span>
<span class="line"><span style="color:#24292E;">      src: scene.asset.</span><span style="color:#6F42C1;">getImageById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;player&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    scene.</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(sprite);</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">  g.game.</span><span style="color:#6F42C1;">pushScene</span><span style="color:#24292E;">(scene);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="関連情報" tabindex="-1">関連情報 <a class="header-anchor" href="#関連情報" aria-label="Permalink to &quot;関連情報&quot;">​</a></h2><ul><li><a href="/tutorial/v3/basic.html#image">画像を扱う</a></li><li><a href="/tutorial/v3/assetPaths.html">複数アセットをまとめて扱う</a></li><li><a href="/reference/tool/akashic-cli/scan.html">akashic-cli</a></li></ul>`,11);function E(y,i,d,h,u,g){const a=e("PlaygroundElement");return l(),p("div",null,[c,o(a,{gameJsonUri:"/snippets/reverse-reference/asset/add-asset/game.json",width:600,height:400}),r])}const C=n(t,[["render",E]]);export{m as __pageData,C as default};
