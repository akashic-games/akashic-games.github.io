import{_ as n,c as l,I as i,w as e,a3 as s,E as p,o as d,k as a}from"./chunks/framework.DaCD_bki.js";const o="/assets/serve-devtool-comment-1.CYq7htwD.png",h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAgCAYAAAB6kdqOAAABUWlDQ1BJQ0MgUHJvZmlsZQAAGJVtkM1KQlEUhT9LCUOwqAZFA4NsZBEmREMzECFK7IdqYF2vf4Ha5XoleoPoASKoYQ9Qo4Y5aNygJOgJahylg5Lbvlqp1Tls9sdincNiQReKpuXsQL5g6LHwvGdjc8vT84wLJwM4GFLUohaMRhfFwvfuPNUHbNa+n7T+qjjH7jhfiDy63mrb7uH4X3/H6U2miqrsD5kJVdMNsI0LR/cNzWIZBnUJJXxocabJZxYnmnzR8KzGQsI3wn1qVkkKV4R9iTY908b5XEn9ymCld6UKaytWHplR1gnjZ5ag9PK/L9DwhdhD4wCdXTJkMfDIG01ujpRwhAIqU/iE/UzLBKx+f/fW0vQjmEsLPLW0+ClclaC/1tK8l+D2QnlZU3Tlp01b1V5Mz/ib7BoBR9k0X0zo2YH6rWm+n5hm/Ri6X+F66ROcXWCLwxTlqAAAAFZlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA5KGAAcAAAASAAAARKACAAQAAAABAAAAJKADAAQAAAABAAAAIAAAAABBU0NJSQAAAFNjcmVlbnNob3RsCkVKAAAB1GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zMjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4zNjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlVzZXJDb21tZW50PlNjcmVlbnNob3Q8L2V4aWY6VXNlckNvbW1lbnQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo66WWQAAABEklEQVRYCe1XWwqDMBBck3oFv8UeUDyJeMCK3354AUlaplDIWklWsDEW9yuPNTM7EwObTdP0pIRCJcTlTeW2JNQ/ehrHkYwxy61d51prKoqCqnvFzs1cy0DGWENlWVKe5yxx78k8zzQMA2mlGSlmGZSJQQbFoWBgAdMNRgg2/VoZFxxYy6vBCLnJR40vQiHlk1Po6x1aq6Cu67XlzWtd1wW/OadCbdsGK9srQWSZUvGEjIcklFCkUNM0wuP8aRLrz6mQpDK/NvLdcypkrZWX6MmU/K1RL/X/vtSSyjxObdpK7lJfhEL+pa0Qmjf0S7ECWMB0gymEThLNWwxSn0YRmG6wzhUbSbXSLtOjxsyyo0i4uC90fVyMsEORJgAAAABJRU5ErkJggg==",c="/assets/serve-devtool-comment-2._ksCfF5j.png",f=JSON.parse('{"title":"(検討中) コメントを使う","description":"","frontmatter":{"outline":[2,3]},"headers":[],"relativePath":"shin-ichiba/multi/comment.md","filePath":"shin-ichiba/multi/comment.md"}'),k={name:"shin-ichiba/multi/comment.md"},r=s(`<h1 id="use-comments" tabindex="-1">(検討中) コメントを使う <a class="header-anchor" href="#use-comments" aria-label="Permalink to &quot;(検討中) コメントを使う {#use-comments}&quot;">​</a></h1><div class="danger custom-block"><p class="custom-block-title">UNDER REVIEW</p><p>このページの内容は <strong>検討中</strong> のものです。現時点でニコ生ゲームとして実際に投稿することはできません。 機能や仕様は変更される可能性があります。</p></div><p>マルチプレイのニコ生ゲームでは、配信に流れたコメントを受信して、ゲーム内で利用することができます。</p><p>コメントを受け取ることで「視聴者のコメントに応じてゲームの展開が変化する」「放送者のコメントによってゲームを制御する」といったコンテンツが作成できます。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>ランキングゲームでは利用できません。</p><p>ニコ生ゲームでコメントを受信しても、配信上のコメント表示には影響しません。</p></div><h2 id="receive" tabindex="-1">コメントの受信 <a class="header-anchor" href="#receive" aria-label="Permalink to &quot;コメントの受信 {#receive}&quot;">​</a></h2><p>ニコ生ゲームでコメントを受信するには、次の手順が必要です。</p><ol><li>game.json に <code>environment.external.nicoliveComment</code> プロパティを追加する</li><li>シーンの <code>onMessage</code> トリガーに、コメントを処理するハンドラを登録する</li><li><code>g.game.external.nicoliveComment.start()</code> を呼び出す</li></ol><p>コメントの受信開始・停止は <code>g.game.external.nicoliveComment</code> (nicoliveComment プラグイン) で行います (3)。 このプラグインを使うために game.json を編集する必要があります (1)。 配信に送られたコメントはメッセージイベント (<code>g.MessageEvent</code>) としてゲームに通知されるため、 <code>onMessage</code> トリガーのハンドラで受け取ることができます (2)。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>nicoliveComment のように <code>g.game.external</code> 以下に与えられる機能を <strong>外部プラグイン</strong> (または単に &quot;プラグイン&quot;) と呼びます。 Akashic ゲームは、利用したい外部プラグインを game.json で宣言することができます。 ただしどの外部プラグインが提供されるかは実行環境に依存します。</p><p>nicoliveComment プラグインは、ニコニコ生放送のほか akashic serve コマンドで利用できます。 (参照: <a href="#debug">#動作確認</a>)</p></div><h3 id="edit-gamejson" tabindex="-1">game.json の編集 <a class="header-anchor" href="#edit-gamejson" aria-label="Permalink to &quot;game.json の編集 {#edit-gamejson}&quot;">​</a></h3><p>game.json に <code>environment.external.nicoliveComment</code> プロパティを追加してください。 値は現在のところ <code>&quot;0&quot;</code> とする必要があります。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;environment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sandbox-runtime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line diff add"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;external&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span></span>
<span class="line diff add"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;nicoliveComment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0&quot;</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>これにより、nicoliveComment プラグインが提供される環境であればゲーム内で <code>g.game.external.nicoliveComment</code> を利用できるようになります。</p><h3 id="register-handler" tabindex="-1">コメントを処理するハンドラの登録 <a class="header-anchor" href="#register-handler" aria-label="Permalink to &quot;コメントを処理するハンドラの登録 {#register-handler}&quot;">​</a></h3><p>コメントはゲームに対して <code>g.MessageEvent</code> として送られます。 シーン (<code>g.Scene</code>) の <code>onMessage</code> トリガーにハンドラを登録して、ゲームに必要な形でコメントを処理してください。</p><p>以下は、受信したコメントの情報をコンソールに出力するだけのコード例です。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// scene はコメントを受信したいシーンとする。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.onMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // .data.type が &quot;nicoservice:stream:comment&quot; であるのがコメント通知イベント。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ev.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ev.data.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nicoservice:stream:comment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // .data.comments にコメント情報の配列が与えられる。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> comments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ev.data.comments;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> comments) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 各コメント情報からコメント本文などを取得できる。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        c.comment, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// コメント本文</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        c.isOperatorComment </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 放送者コメントであるか否か</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>コメントを通知するイベントは「<code>data.type</code> プロパティが <strong><code>&quot;nicoservice:stream:comment&quot;</code></strong> である <code>g.MessaveEvent</code> 」として通知されます。 <code>data.comments</code> にコメント情報が配列で格納されています。</p><p>このコード例ではコメント情報のうち、コメント本文 (<code>comment</code> プロパティ) と 「放送者コメントであるかどうか」のフラグ (<code>isOperatorComment</code> プロパティ) を利用しています。 コメント情報として与えられる内容は、受信開始時の指定によって変化します (参照: <a href="#plugin-api">#プラグインAPI</a>)。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>大量のコメントを受信する際の通信量を減らすため、 <code>comments</code> は配列になっています。 上のコード例では for-of 文で単純にすべてのコメント情報を順に処理しています。 頻度が高くなければ、コメントは一つずつ (長さ 1 の配列で) <code>MessageEvent</code> として通知されます。</p></div><h3 id="start-receive" tabindex="-1">受信開始 <a class="header-anchor" href="#start-receive" aria-label="Permalink to &quot;受信開始 {#start-receive}&quot;">​</a></h3><p>受信開始は nicoliveComment プラグインの <code>start()</code> メソッドで行います。 引数として、受信したい情報の配列を指定してください。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// コメントの受信を開始する。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.nicoliveComment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // コメント情報として受け取りたいフィールド。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fields: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;comment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// コメント本文</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;isOperatorComment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 放送者コメントかどうか</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>利用できるフィールドは他に <code>&quot;userID&quot;</code> (送信者のユーザID) や、 <code>&quot;isAnonymous&quot;</code> (匿名コメントかどうか) などがあります (詳細は <a href="#plugin-api">#プラグインAPI</a> を参照) 。</p><p>不要な通信を避けるため、ゲームで実際に利用するフィールドのみ受信するようにしてください。</p><h3 id="stop-receive" tabindex="-1">受信停止 <a class="header-anchor" href="#stop-receive" aria-label="Permalink to &quot;受信停止 {#stop-receive}&quot;">​</a></h3><p>コメントが必要なくなった時には、 <code>stop()</code> メソッドで受信を停止してください。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.nicoliveComment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="debug" tabindex="-1">動作確認 <a class="header-anchor" href="#debug" aria-label="Permalink to &quot;動作確認 {#debug}&quot;">​</a></h2><p>nicoliveComment プラグインを用いるニコ生ゲームは、通常の Akashic ゲーム同様 <code>akashic serve</code> コマンドで動作確認を行うことができます。</p><div class="danger custom-block"><p class="custom-block-title">UNDER REVIEW</p><p>現在は <code>akashic-cli@2.17.24-next.0</code> でのみ利用可能です。 <code>npm install -g @akashic/akashic-cli@2.17.24-next.0</code> と、明示的にバージョンを指定してインストールする必要があります。</p></div><p>次の方法でコメントを送信でき、またゲーム内で受信できます。</p><ul><li>serve の UI から送信</li><li>sandbox.config.js で指定したテンプレートを (自動または手動で) 送信</li></ul><h3 id="send-on-serve" tabindex="-1">serve の UI からの送信 <a class="header-anchor" href="#send-on-serve" aria-label="Permalink to &quot;serve の UI からの送信 {#send-on-serve}&quot;">​</a></h3><p>akashic serve の開発者ツール、 Niconico タブでコメントを送信できます。</p>`,36),E=a("img",{src:o,style:{border:"1px solid #e8e8e8","border-radius":"4px"}},null,-1),g=s('<p>開発者ツールの Niconico タブで、画面左側から &quot;Comment&quot; を選択すると、以下の UI が表示されます。</p><ul><li>受信したコメント一覧</li><li>コメント入力欄</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>画面下側の開発者ツール (devtool) 部分は、画面右上のハンバーガーボタン (<img src="'+h+'" style="display:inline;vertical-align:middle;" width="20/">) を押すと表示されます。</p></div><p>コメント入力欄では、コメント本文とコマンドとして任意の文字列を指定できます。 &quot;Send&quot; ボタンを押すと、選択されている送信者タイプ (Anonymous, Named, Operator) に応じた内容でコメントが送信されます。</p><table tabindex="0"><thead><tr><th style="text-align:center;">送信者<br>タイプ</th><th style="text-align:center;">意味合い</th><th style="text-align:left;">動作</th></tr></thead><tbody><tr><td style="text-align:center;">Anonymous</td><td style="text-align:center;">「なふだ機能」OFFで送信</td><td style="text-align:left;"><code>isAnonymous</code>を <code>true</code> で、<code>userID</code> をランダムな文字列にして送信する</td></tr><tr><td style="text-align:center;">Named</td><td style="text-align:center;">「なふだ機能」ONで送信</td><td style="text-align:left;"><code>isAnonymous</code> を <code>false</code> で、 <code>userID</code> をそのウィンドウのプレイヤー ID にして送信する</td></tr><tr><td style="text-align:center;">Operator</td><td style="text-align:center;">放送者コメントとして送信</td><td style="text-align:left;"><code>isOperatorComment</code> を <code>true</code> で、 <code>userID</code> なしで送信する</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>serve が <code>--target-service nicolive</code> (または <code>-s nicolive</code>) で起動されている場合、 最初に開かれたウィンドウが放送者役として扱われます。送信者タイプを選択する UI もこれに従います。 上の画像で、 &quot;Operator&quot; が選択不可になっているのはこのためです。</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Comment の画面は、nicoliveComment プラグインの <code>start()</code> が呼ばれてから <code>stop()</code> が呼ばれるまでの間のみ操作できます。</p></div><h3 id="send-template" tabindex="-1">テンプレートからの送信 <a class="header-anchor" href="#send-template" aria-label="Permalink to &quot;テンプレートからの送信 {#send-template}&quot;">​</a></h3><p>動作確認中に都度入力する手間を省くため、事前にコメントのテンプレートを作成しておくことができます。</p>',9),y=a("img",{src:c,style:{border:"1px solid #e8e8e8","border-radius":"4px"}},null,-1),m=s(`<p>テンプレートの設定がある場合、コメント入力欄の上に &quot;Template&quot; 列が表示されます。 この列のボタン押下で指定したコメント (複数可) を送信できます。</p><p>テンプレートは、 sandbox.config.js の <code>external.nicoliveComment.templates</code> フィールドで指定します。 次の例は、「あいうえお」というコメントが 3 度送られるテンプレート &quot;あいうえおx3&quot; を記載した sandbox.config.js です。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  external: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nicoliveComment: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      templates: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // (テンプレート名): (内容) の形式で指定</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;あいうえおx3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // コメントの内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // userID: pid1 が非匿名で「あいうえお」とコメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pid1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 最初のコメントの 300 フレーム後、匿名で「あいうえお」とコメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abcdef&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 最初のコメントの 1000 フレーム後、放送者が「あいうえお」とコメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isOperatorComment: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><code>comments</code> の各要素には、コメント情報に存在するフィールドをすべて指定できます (参考: <a href="#spec-event">#コメント通知イベント</a>) 。 さらに <code>frame</code> プロパティで、送信開始から何フレーム後に送信するかも指定できます (指定しなければ直前のコメントと同時に送られます) 。</p><p>そのほかテンプレートでは、特定タイミングでの自動送信も指定できます。 詳細は <a href="#spec-templates">#コメントテンプレート</a> の節を参照してください。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>sandbox.config.js は akashic serve/sandbox コマンドの設定ファイルです。 game.json のあるディレクトリにこの名前のファイルを置くと、起動時に自動的に認識されます。 詳細は <a href="./../../reference/manifest/sandbox-config.html">リファレンス » 設定ファイル » sandbox.config.js の仕様</a> を参照してください。</p></div><h2 id="spec" tabindex="-1">仕様 <a class="header-anchor" href="#spec" aria-label="Permalink to &quot;仕様 {#spec}&quot;">​</a></h2><h3 id="plugin-api" tabindex="-1">プラグインAPI <a class="header-anchor" href="#plugin-api" aria-label="Permalink to &quot;プラグインAPI {#plugin-api}&quot;">​</a></h3><p>nicoliveComment プラグインは、 <code>start()</code>, <code>stop()</code> の 2 つのメソッドを持ちます。</p><h4 id="api-start" tabindex="-1">start() <a class="header-anchor" href="#api-start" aria-label="Permalink to &quot;start() {#api-start}&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.nicoliveComment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(opts, callback)</span></span></code></pre></div><p><code>start()</code> はコメントの受信を開始します。 引数 <code>opts</code> はコメント受信のオプション、 <code>callback</code> は完了時に呼び出されるコールバックです。</p><p>第一引数 <code>opts</code> は、次のプロパティを持つオブジェクトまたは <code>null</code> です。</p><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:center;">型</th><th style="text-align:left;">値</th></tr></thead><tbody><tr><td style="text-align:center;"><code>fields</code></td><td style="text-align:center;"><code>string</code> の配列、<br>または <code>null</code></td><td style="text-align:left;">コメント情報として受け取りたいプロパティ名の配列</td></tr></tbody></table><p>配列 <code>fields</code> の各要素は、次のいずれかでなければなりません。 それぞれコメント情報の同名のプロパティの対応します (参照: <a href="#spec-event">#コメント通知イベント</a>)。</p><table tabindex="0"><thead><tr><th style="text-align:center;">名前</th><th style="text-align:left;">内容</th></tr></thead><tbody><tr><td style="text-align:center;"><code>&quot;comment&quot;</code></td><td style="text-align:left;">コメント本文</td></tr><tr><td style="text-align:center;"><code>&quot;command&quot;</code></td><td style="text-align:left;">コメント投稿時に指定されたコマンド文字列</td></tr><tr><td style="text-align:center;"><code>&quot;userID&quot;</code></td><td style="text-align:left;">コメント送信者 (または匿名化された値)</td></tr><tr><td style="text-align:center;"><code>&quot;isAnonymous&quot;</code></td><td style="text-align:left;">匿名のコメント(「なふだ機能」がOFF)かどうか</td></tr><tr><td style="text-align:center;"><code>&quot;isOperatorComment&quot;</code></td><td style="text-align:left;">放送者コメントであるかどうか</td></tr></tbody></table><p><code>opts</code> や <code>fields</code> プロパティが <code>null</code> または省略された場合、 <code>fields</code> は <code>[&quot;comment&quot;, &quot;userID&quot;, &quot;isAnonymous&quot;, &quot;isOperatorComment&quot;]</code> として扱われます。</p><p>第二引数 <code>callback</code> は、 <code>start()</code> の完了時に呼び出される関数です。 呼び出しの際、以下の引数が与えられます。</p><table tabindex="0"><thead><tr><th style="text-align:center;">引数</th><th style="text-align:center;">型</th><th style="text-align:left;">値</th></tr></thead><tbody><tr><td style="text-align:center;">第一引数 (<code>err</code>)</td><td style="text-align:center;"><code>Error</code> または <code>null</code></td><td style="text-align:left;">名前取得に成功した場合、 <code>null</code> 。<br>失敗した場合、対応する <code>Error</code> 。</td></tr></tbody></table><p>完了を待つ必要がなく、エラーに対して行う処理がない場合は、 <code>callback</code> を省略することができます。</p><p><code>start()</code> の戻り値は <code>undefined</code> です。</p><h4 id="api-stop" tabindex="-1">stop() <a class="header-anchor" href="#api-stop" aria-label="Permalink to &quot;stop() {#api-stop}&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.nicoliveComment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p><code>stop()</code> はコメントの受信を停止します。 引数はありません。戻り値は <code>undefined</code> です。</p><h3 id="spec-event" tabindex="-1">コメント通知イベント <a class="header-anchor" href="#spec-event" aria-label="Permalink to &quot;コメント通知イベント {#spec-event}&quot;">​</a></h3><p>コメントは、コメント通知イベントとしてゲームに与えられます。 <strong>コメント通知イベント</strong> は、次の条件を満たすイベント <code>ev</code> です。</p><ul><li><code>g.MessageEvent</code> である</li><li><code>ev.player.id</code> (送信者) が <code>&quot;:akashic&quot;</code> である</li><li><code>ev.data</code> が次の要素を持つオブジェクトである</li></ul><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:left;">内容</th></tr></thead><tbody><tr><td style="text-align:center;"><code>type</code></td><td style="text-align:left;"><code>&quot;nicoservice:stream:comment&quot;</code> という文字列</td></tr><tr><td style="text-align:center;"><code>comments</code></td><td style="text-align:left;">コメント情報の配列</td></tr></tbody></table><p><code>g.MessageEvent</code> の <code>data.type</code> を確認することで、そのイベントがコメント通知イベントかどうか判別することができます。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>data</code> プロパティは <code>undefined</code> や <code>null</code> でもありうることに注意してください。 以下のように <code>data</code> が <code>null</code> などでも動作する形で判定を行う必要があります。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ev.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ev.data.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nicoservice:stream:comment&quot;</span></span></code></pre></div></div><p>コメント通知イベントの <code>comments</code> は、コメント情報の配列です。 <strong>コメント情報</strong> は、次のプロパティを持つオブジェクトです。</p><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:center;">型</th><th style="text-align:left;">内容</th></tr></thead><tbody><tr><td style="text-align:center;"><code>comment</code></td><td style="text-align:center;"><code>string</code> または <code>undefined</code></td><td style="text-align:left;">コメント本文。</td></tr><tr><td style="text-align:center;"><code>command</code></td><td style="text-align:center;"><code>string</code> または <code>undefined</code></td><td style="text-align:left;">コメントのコマンド指定。(参考: ニコニコヘルプ の <a href="https://qa.nicovideo.jp/faq/show/6767#m" target="_blank" rel="noreferrer">生放送プレーヤー操作方法</a> ページ)</td></tr><tr><td style="text-align:center;"><code>userID</code></td><td style="text-align:center;"><code>string</code> または <code>undefined</code></td><td style="text-align:left;">コメントを送信したユーザ ID 。<br>放送者コメントの場合省略される。<br>「なふだ機能」が OFFのコメント (匿名) では匿名化された値。</td></tr><tr><td style="text-align:center;"><code>isAnonymous</code></td><td style="text-align:center;"><code>boolean</code> または <code>undefined</code></td><td style="text-align:left;">匿名のコメント (「なふだ機能」が OFF) かどうか。</td></tr><tr><td style="text-align:center;"><code>isOperatorComment</code></td><td style="text-align:center;"><code>true</code> または <code>undefined</code></td><td style="text-align:left;">放送者コメントか否か。放送者コメントでない場合は単に省略される。</td></tr></tbody></table><p>ただし <code>start()</code> で要求されなかったプロパティは全て <code>undefined</code> になります。</p><div class="warning custom-block"><p class="custom-block-title">注意: userID とプレイヤー ID</p><p>コメント情報の <code>userID</code> は、ゲーム内のプレイヤー ID (<code>g.game.selfId</code> や、イベントの <code>player.id</code> プロパティで得られる値) と比較することができます。</p><p>しかしニコニコ生放送のコメントは、デフォルトでは「なふだ機能」が OFF (匿名) になっています (参考: ニコニコヘルプの <a href="https://qa.nicovideo.jp/faq/show/21148" target="_blank" rel="noreferrer">なふだ機能とは</a> ページ) 。 すなわち多くのコメントで <code>userID</code> が匿名化された値になっている可能性が高く、 <strong>コメントの送信者とゲームのプレイヤーを紐づけることは必ずしもできない</strong> 点に注意してください。</p><p>「ゲームに参加しているプレイヤーのコメント」を特に識別したい場合は、 「ゲーム内で &quot;なふだ機能&quot; を ON にするよう求める」 「メインゲーム開始前にプレイヤーにテストコメントを送信させて確認する」など、ゲーム側での対応が必要になります。</p><p>なお、<strong>配信者のコメントは必ず <code>isOperatorCommet</code> フラグで識別できます</strong> 。</p></div><h3 id="spec-templates" tabindex="-1">コメントテンプレート <a class="header-anchor" href="#spec-templates" aria-label="Permalink to &quot;コメントテンプレート {#spec-templates}&quot;">​</a></h3><div class="danger custom-block"><p class="custom-block-title">UNDER REVIEW</p><p>この節は仕様確定後に「リファレンス」ページに移動されます。</p></div><p>sandbox.config.js の <code>external.nicoliveComment.templates</code> は、コメントテンプレートのテーブルです。 存在する場合、<code>templates</code> はオブジェクトでなければなりません。 <code>templates</code> の各キーはテンプレート名、値は対応するコメントテンプレートです。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// sandbox.config.js の external.nicoliveComment.templates の構造</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    nicoliveComment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      templates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&lt;テンプレート名A&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* コメントテンプレート */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&lt;テンプレート名B&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* コメントテンプレート */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>コメントテンプレートは、次の要素を持つオブジェクトです。</p><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:center;">型</th><th style="text-align:center;">省略可否</th><th style="text-align:left;">説明</th></tr></thead><tbody><tr><td style="text-align:center;"><code>comments</code></td><td style="text-align:center;">配列</td><td style="text-align:center;">必須</td><td style="text-align:left;">送信するコメント内容の指定。</td></tr><tr><td style="text-align:center;"><code>startBy</code></td><td style="text-align:center;"><code>&quot;playStart&quot;</code>,<br><code>&quot;pluginStart&quot;</code>,<br>または <code>&quot;manual&quot;</code></td><td style="text-align:center;">省略可</td><td style="text-align:left;">自動送信の開始タイミング (後述)。<br>省略された場合、 <code>&quot;manual&quot;</code> 。</td></tr></tbody></table><p><code>comments</code> はコメント内容を指定するオブジェクトの配列です。その各要素は次のプロパティを持ちます。</p><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:center;">型</th><th style="text-align:center;">省略可否</th><th style="text-align:left;">説明</th></tr></thead><tbody><tr><td style="text-align:center;"><code>comment</code>,<br><code>command</code>,<br><code>userID</code>,<br><code>isAnonymous</code>,<br><code>isOperatorComment</code></td><td style="text-align:center;">文字列</td><td style="text-align:center;">省略可</td><td style="text-align:left;"><a href="#spec-event">コメント情報</a> の同名のプロパティに対応。</td></tr><tr><td style="text-align:center;"><code>frame</code></td><td style="text-align:center;">数値</td><td style="text-align:center;">省略可</td><td style="text-align:left;">送信タイミング。単位はフレーム。<br>値の解釈は <code>startBy</code> によって決まる。<br>省略された場合、この要素が配列の最初の要素なら <code>0</code> 、それ以外は直前の要素のそれと同値。</td></tr></tbody></table><p><code>startBy</code> は自動送信の有無・タイミングを指定します。値は次のいずれかです。</p><table tabindex="0"><thead><tr><th style="text-align:center;"><code>startBy</code></th><th style="text-align:left;">自動<br>送信</th><th style="text-align:left;"><code>frame</code> の解釈 (送信タイミング)</th></tr></thead><tbody><tr><td style="text-align:center;"><code>&quot;playStart&quot;</code></td><td style="text-align:left;">する</td><td style="text-align:left;">ゲーム開始からの経過フレーム数。</td></tr><tr><td style="text-align:center;"><code>&quot;pluginStart&quot;</code></td><td style="text-align:left;">する</td><td style="text-align:left;">nicoliveComment プラグインの <code>start()</code> 呼び出しからの経過フレーム数。</td></tr><tr><td style="text-align:center;"><code>&quot;manual&quot;</code></td><td style="text-align:left;">しない</td><td style="text-align:left;">UI から送信 (して、serve のサーバに到達) してからの経過フレーム数。</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>startBy</code> の指定に関わらず、コメントテンプレートは serve の UI からボタンで送信することができます。 この場合 <code>frame</code> は全て <code>&quot;manual&quot;</code> と同様に解釈されます。</p></div><p>次のコードは、三種類のコメントテンプレートを定義した sandbox.config.js の例です。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  external: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nicoliveComment: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      templates: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // userID: &quot;pid1&quot; が非匿名で「あいうえお」と送信するテンプレート。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pid1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 放送者が (放送者コメントとして)「あいうえお」と送信するテンプレート。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;放送者:あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isOperatorComment: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // userID: &quot;pid1&quot; と匿名 (「なふだ機能」OFF) の二人が</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 200 フレーム間隔で「わこつ」と送信するテンプレート。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // nicoliveComment プラグインの \`start()\` 後 100 フレーム目から自動送信。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;自動送信:わこつ×3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          startBy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pluginStart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;わこつ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pid1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, command: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;わこつ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abcabc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;わこつ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cdecde&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div>`,47);function u(b,A,v,C,F,x){const t=p("CaptionedFigure");return d(),l("div",null,[r,i(t,{caption:"「最後に受信したコメントを表示するだけのゲーム」を起動した akashic serve"},{default:e(()=>[E]),_:1}),g,i(t,{caption:"テンプレート設定がある場合の画面"},{default:e(()=>[y]),_:1}),m])}const D=n(k,[["render",u]]);export{f as __pageData,D as default};
