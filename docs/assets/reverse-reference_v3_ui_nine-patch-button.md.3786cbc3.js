import{_ as a,C as l,o as p,c as o,H as e,Q as s}from"./chunks/framework.459ab1e9.js";const C=JSON.parse('{"title":"可変サイズのボタンを作る","description":"","frontmatter":{},"headers":[],"relativePath":"reverse-reference/v3/ui/nine-patch-button.md","filePath":"reverse-reference/v3/ui/nine-patch-button.md"}'),t={name:"reverse-reference/v3/ui/nine-patch-button.md"},c=s(`<h1 id="可変サイズのボタンを作る" tabindex="-1">可変サイズのボタンを作る <a class="header-anchor" href="#可変サイズのボタンを作る" aria-label="Permalink to &quot;可変サイズのボタンを作る&quot;">​</a></h1><p>角丸のデザインの画像でボタンを作る場合、単純に拡大すると角丸のサイズが変わってしまいます。 角丸のような「枠」部分を維持して拡大した画像でボタンを作るには、<code>g.SurfaceUtil.drawNinePatch()</code> を利用します。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">buttonImageAsset</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> scene.asset.</span><span style="color:#B392F0;">getImage</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/assets/button.png&quot;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">srcSurface</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> g.SurfaceUtil.</span><span style="color:#B392F0;">asSurface</span><span style="color:#E1E4E8;">(buttonImageAsset); </span><span style="color:#6A737D;">// アセットから \`Surface\` を取得</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">destSurface</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> scene.game.resourceFactory.</span><span style="color:#B392F0;">createSurface</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">250</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// 描画先の \`Surface\` を 250x100 の大きさで生成</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">borderWidth</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> { top: </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, bottom: </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, left: </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, right: </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> }; </span><span style="color:#6A737D;">// 上下左右の「拡大しない」領域の大きさを指定</span></span>
<span class="line"><span style="color:#E1E4E8;">g.SurfaceUtil.</span><span style="color:#B392F0;">drawNinePatch</span><span style="color:#E1E4E8;">(destSurface, srcSurface, borderWidth); </span><span style="color:#6A737D;">// 描画先の \`Surface\` にナインパッチ後の画像を描画</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ninePacthButton</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> g.</span><span style="color:#B392F0;">Sprite</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  scene: scene,</span></span>
<span class="line"><span style="color:#E1E4E8;">  src: destSurface,</span></span>
<span class="line"><span style="color:#E1E4E8;">  touchable: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#6A737D;">// ポイントダウン時に横幅を拡大する</span></span>
<span class="line"><span style="color:#E1E4E8;">ninePacthButton.onPointDown.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">ev</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  ninePacthButton.scaleX </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1.2</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ninePacthButton.</span><span style="color:#B392F0;">modified</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#6A737D;">// ポイントアップ時に横幅を戻す</span></span>
<span class="line"><span style="color:#E1E4E8;">ninePacthButton.onPointUp.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">ev</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  ninePacthButton.scaleX </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1.2</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ninePacthButton.</span><span style="color:#B392F0;">modified</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">scene.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(ninePacthImg);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">buttonImageAsset</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> scene.asset.</span><span style="color:#6F42C1;">getImage</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/assets/button.png&quot;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">srcSurface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> g.SurfaceUtil.</span><span style="color:#6F42C1;">asSurface</span><span style="color:#24292E;">(buttonImageAsset); </span><span style="color:#6A737D;">// アセットから \`Surface\` を取得</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">destSurface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> scene.game.resourceFactory.</span><span style="color:#6F42C1;">createSurface</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">250</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">); </span><span style="color:#6A737D;">// 描画先の \`Surface\` を 250x100 の大きさで生成</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">borderWidth</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> { top: </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, bottom: </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, left: </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">, right: </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> }; </span><span style="color:#6A737D;">// 上下左右の「拡大しない」領域の大きさを指定</span></span>
<span class="line"><span style="color:#24292E;">g.SurfaceUtil.</span><span style="color:#6F42C1;">drawNinePatch</span><span style="color:#24292E;">(destSurface, srcSurface, borderWidth); </span><span style="color:#6A737D;">// 描画先の \`Surface\` にナインパッチ後の画像を描画</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ninePacthButton</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> g.</span><span style="color:#6F42C1;">Sprite</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  scene: scene,</span></span>
<span class="line"><span style="color:#24292E;">  src: destSurface,</span></span>
<span class="line"><span style="color:#24292E;">  touchable: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#6A737D;">// ポイントダウン時に横幅を拡大する</span></span>
<span class="line"><span style="color:#24292E;">ninePacthButton.onPointDown.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">((</span><span style="color:#E36209;">ev</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  ninePacthButton.scaleX </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1.2</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  ninePacthButton.</span><span style="color:#6F42C1;">modified</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#6A737D;">// ポイントアップ時に横幅を戻す</span></span>
<span class="line"><span style="color:#24292E;">ninePacthButton.onPointUp.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">((</span><span style="color:#E36209;">ev</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  ninePacthButton.scaleX </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1.2</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  ninePacthButton.</span><span style="color:#6F42C1;">modified</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">scene.</span><span style="color:#6F42C1;">append</span><span style="color:#24292E;">(ninePacthImg);</span></span></code></pre></div><h2 id="利用例" tabindex="-1">利用例 <a class="header-anchor" href="#利用例" aria-label="Permalink to &quot;利用例&quot;">​</a></h2><p>次のコンテンツは、上段に元画像と下段にナインパッチで拡大した画像を配置しています。ナインパッチ化した画像はクリック時に画像が縦・横方向に少し動きます。</p>`,5),r=s('<h2 id="詳細" tabindex="-1">詳細 <a class="header-anchor" href="#詳細" aria-label="Permalink to &quot;詳細&quot;">​</a></h2><p>画像にナインパッチを適応し、外枠部分を固定したまま拡大したボタンを実現しています。 ナインパッチについていは<a href="/reverse-reference/v3/drawing/nine-patch.html">ナインパッチを利用する</a>を参照してください。 <code>onPointDown</code> 等のポイントイベントは <a href="./../operation/click.html">クリック・タップできるようにする</a> を参照してください。</p><h2 id="関連情報" tabindex="-1">関連情報 <a class="header-anchor" href="#関連情報" aria-label="Permalink to &quot;関連情報&quot;">​</a></h2><ul><li><a href="/akashic-engine/v3/functions/SurfaceUtil.drawNinePatch.html">API リファレンス</a></li></ul>',4);function E(y,i,u,d,h,F){const n=l("PlaygroundElement");return p(),o("div",null,[c,e(n,{gameJsonUri:"/snippets/reverse-reference/ui/nine-patch-button/game.json",width:600,height:400}),r])}const B=a(t,[["render",E]]);export{C as __pageData,B as default};
