import{_ as n,c as l,I as i,w as t,a3 as s,E as p,o as h,k as e}from"./chunks/framework.B_s5ISUx.js";const d="/assets/serve-devtool-comment-1._DAkpI4h.png",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAgCAYAAAB6kdqOAAABUWlDQ1BJQ0MgUHJvZmlsZQAAGJVtkM1KQlEUhT9LCUOwqAZFA4NsZBEmREMzECFK7IdqYF2vf4Ha5XoleoPoASKoYQ9Qo4Y5aNygJOgJahylg5Lbvlqp1Tls9sdincNiQReKpuXsQL5g6LHwvGdjc8vT84wLJwM4GFLUohaMRhfFwvfuPNUHbNa+n7T+qjjH7jhfiDy63mrb7uH4X3/H6U2miqrsD5kJVdMNsI0LR/cNzWIZBnUJJXxocabJZxYnmnzR8KzGQsI3wn1qVkkKV4R9iTY908b5XEn9ymCld6UKaytWHplR1gnjZ5ag9PK/L9DwhdhD4wCdXTJkMfDIG01ujpRwhAIqU/iE/UzLBKx+f/fW0vQjmEsLPLW0+ClclaC/1tK8l+D2QnlZU3Tlp01b1V5Mz/ib7BoBR9k0X0zo2YH6rWm+n5hm/Ri6X+F66ROcXWCLwxTlqAAAAFZlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA5KGAAcAAAASAAAARKACAAQAAAABAAAAJKADAAQAAAABAAAAIAAAAABBU0NJSQAAAFNjcmVlbnNob3RsCkVKAAAB1GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zMjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4zNjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlVzZXJDb21tZW50PlNjcmVlbnNob3Q8L2V4aWY6VXNlckNvbW1lbnQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo66WWQAAABEklEQVRYCe1XWwqDMBBck3oFv8UeUDyJeMCK3354AUlaplDIWklWsDEW9yuPNTM7EwObTdP0pIRCJcTlTeW2JNQ/ehrHkYwxy61d51prKoqCqnvFzs1cy0DGWENlWVKe5yxx78k8zzQMA2mlGSlmGZSJQQbFoWBgAdMNRgg2/VoZFxxYy6vBCLnJR40vQiHlk1Po6x1aq6Cu67XlzWtd1wW/OadCbdsGK9srQWSZUvGEjIcklFCkUNM0wuP8aRLrz6mQpDK/NvLdcypkrZWX6MmU/K1RL/X/vtSSyjxObdpK7lJfhEL+pa0Qmjf0S7ECWMB0gymEThLNWwxSn0YRmG6wzhUbSbXSLtOjxsyyo0i4uC90fVyMsEORJgAAAABJRU5ErkJggg==",c="/assets/serve-devtool-comment-2.CvhhUouK.png",f=JSON.parse('{"title":"(検討中) コメントを使う","description":"","frontmatter":{"outline":[2,3]},"headers":[],"relativePath":"shin-ichiba/multi/comment.md","filePath":"shin-ichiba/multi/comment.md"}'),k={name:"shin-ichiba/multi/comment.md"},r=s(`<h1 id="use-comments" tabindex="-1">(検討中) コメントを使う <a class="header-anchor" href="#use-comments" aria-label="Permalink to &quot;(検討中) コメントを使う {#use-comments}&quot;">​</a></h1><div class="danger custom-block"><p class="custom-block-title">UNDER REVIEW</p><p>このページの内容は <strong>検討中</strong> のものです。現時点でニコ生ゲームとして実際に投稿することはできません。 機能や仕様は変更される可能性があります。</p></div><p>マルチプレイのニコ生ゲームでは、配信に流れたコメントを受信して、ゲーム内で利用することができます。</p><p>コメントを受け取ることで「視聴者のコメントに応じてゲームの展開が変化する」「放送者のコメントによってゲームを制御する」といったコンテンツが作成できます。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><ul><li>ランキングゲームでは利用できません。</li><li>ニコ生ゲームでコメントを受信しても、配信上のコメント表示には影響しません。</li></ul></div><h2 id="receive" tabindex="-1">コメントの受信 <a class="header-anchor" href="#receive" aria-label="Permalink to &quot;コメントの受信 {#receive}&quot;">​</a></h2><p>ニコ生ゲームでコメントを受信するには、次の手順が必要です。</p><ol><li>game.json に <code>environment.external.namagameComment</code> プロパティを追加する</li><li>シーンの <code>onMessage</code> トリガーに、コメントを処理するハンドラを登録する</li><li><code>g.game.external.namagameComment</code> の <code>start()</code> を呼び出す</li></ol><p>コメントの受信開始・停止は <code>g.game.external.namagameComment</code> (namagameComment プラグイン) で行います (3)。 このプラグインを使うために game.json を編集する必要があります (1)。 配信に送られたコメントはメッセージイベント (<code>g.MessageEvent</code>) としてゲームに通知されるため、 <code>onMessage</code> トリガーのハンドラで受け取ることができます (2)。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>namagameComment のように <code>g.game.external</code> 以下に与えられる機能を <strong>外部プラグイン</strong> (または単に &quot;プラグイン&quot;) と呼びます。 Akashic ゲームは、必要な外部プラグインを game.json で宣言することができます。 ただしどの外部プラグインが利用できるかは実行環境に依存します。</p><p>namagameComment プラグインは、ニコニコ生放送のほか akashic serve コマンドで利用できます。 (参照: <a href="#debug">#動作確認</a>)</p></div><h3 id="edit-gamejson" tabindex="-1">game.json の編集 <a class="header-anchor" href="#edit-gamejson" aria-label="Permalink to &quot;game.json の編集 {#edit-gamejson}&quot;">​</a></h3><p>game.json に <code>environment.external.namagameComment</code> プロパティを追加してください。 値は現在のところ <code>&quot;0&quot;</code> とする必要があります。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;environment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;sandbox-runtime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line diff add"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;external&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span></span>
<span class="line diff add"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;namagameComment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0&quot;</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>これによりゲーム内で <code>g.game.external.namagameComment</code> を利用できるようになります。</p><h3 id="register-handler" tabindex="-1">コメントを処理するハンドラの登録 <a class="header-anchor" href="#register-handler" aria-label="Permalink to &quot;コメントを処理するハンドラの登録 {#register-handler}&quot;">​</a></h3><p>コメントはゲームに対して <code>g.MessageEvent</code> として送られます。 シーン (<code>g.Scene</code>) の <code>onMessage</code> トリガーにハンドラを登録して、ゲームに必要な形でコメントを処理してください。</p><p>以下は、受信したコメントの情報をコンソールに出力するだけのコード例です。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// scene はコメントを受信したいシーンとする。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.onMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // .data.type が &quot;namagame:comment&quot; であるのがコメント通知イベント。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ev.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ev.data.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;namagame:comment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // .data.comments にコメント情報の配列が与えられる。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> comments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ev.data.comments;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> comments) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 各コメント情報からコメント本文などを取得できる。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        c.comment, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// コメント本文</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        c.isAnonymous </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 匿名コメントであるか否か</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>コメントを通知するイベントは「<code>data.type</code> プロパティが <strong><code>&quot;namagame:comment&quot;</code></strong> である <code>g.MessaveEvent</code> 」として通知されます。 <code>data.comments</code> にコメント情報が配列で格納されています。</p><p>このコード例ではコメント情報のうち、コメント本文 (<code>comment</code> プロパティ) と 「匿名コメントであるかどうか」のフラグ (<code>isAnonymous</code> プロパティ) を利用しています。 (他のプロパティについては <a href="#spec-event">後述</a>)</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>大量のコメントを受信する際の通信量を減らすため、 <code>comments</code> は配列になっています。 上のコード例では for-of 文で単純にすべてのコメント情報を順に処理しています。 頻度が高くなければ、コメントは一つずつ (長さ 1 の配列で) <code>MessageEvent</code> として通知されます。</p></div><h3 id="start-receive" tabindex="-1">受信開始 <a class="header-anchor" href="#start-receive" aria-label="Permalink to &quot;受信開始 {#start-receive}&quot;">​</a></h3><p>受信開始は namagameComment プラグインの <code>start()</code> メソッドで行います。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.namagameComment?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p><code>?.</code> を使っていることに注意してください。</p><p>これはこのプラグインが、ニコニコ生放送のサーバ上の (視聴者に対応しない) 特殊なインスタンスにしか存在しないためです。 その一箇所で呼び出しさえすれば、マルチプレイの全員がコメント通知イベントを受信できるようになっています。 そのため <code>?.</code> を使うなどして「プラグインがある環境では <code>start()</code> を呼び出し、ない環境では何もしないでおく」必要があります。</p><div class="tip custom-block"><p class="custom-block-title">TIP: ?. 演算子のサポート</p><p><code>?.</code> (optional chaining) 演算子は、<code>akashic-cli@3.0.0</code> 以降で利用できるようになりました。 (参考: <a href="./../es-version.html">ニコ生ゲームを作ろう » ECMAScript のバージョン (JavaScript で利用できる機能) について</a>)</p><p>以前のバージョンでは、if 文などを使って書く必要があります。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (g.game.external.namagameComment)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  g.game.external.namagameComment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>ただし、いずれにせよ akashic serve でコメント機能を動作確認するには、後述のとおり <code>3.0.7</code> (予定) 以降の <code>akashic-cli</code> が必要です。バージョンが古い場合は <code>npm install -g @akahsic/akashic-cli</code> を実行して、最新に更新することをおすすめします。</p></div><h3 id="stop-receive" tabindex="-1">受信停止 <a class="header-anchor" href="#stop-receive" aria-label="Permalink to &quot;受信停止 {#stop-receive}&quot;">​</a></h3><p>コメントが必要なくなった時には、 <code>stop()</code> メソッドで受信を停止してください。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.namagameComment?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="debug" tabindex="-1">動作確認 <a class="header-anchor" href="#debug" aria-label="Permalink to &quot;動作確認 {#debug}&quot;">​</a></h2><p><code>akashic serve</code> コマンドで、namagameComment プラグインを含む動作確認が可能です。 <code>akashic serve</code> 上では次の方法でコメントを送信でき、またゲーム内で受信できます。</p><ul><li>UI (ブラウザ画面) から送信</li><li>sandbox.config.js で指定したテンプレートを (自動または手動で) 送信</li></ul><div class="danger custom-block"><p class="custom-block-title">UNDER REVIEW</p><p>これらの機能は <code>akashic-cli@3.0.7</code> (予定) 以降で利用可能です。</p></div><h3 id="send-on-serve" tabindex="-1">serve の UI (ブラウザ画面) からの送信 <a class="header-anchor" href="#send-on-serve" aria-label="Permalink to &quot;serve の UI (ブラウザ画面) からの送信 {#send-on-serve}&quot;">​</a></h3><p>akashic serve の開発者ツール、 Niconico タブでコメントを送信できます。</p>`,36),E=e("img",{src:d,style:{border:"1px solid #e8e8e8","border-radius":"4px"}},null,-1),g=s('<p>開発者ツールの Niconico タブで、画面左側から &quot;Comment&quot; を選択すると、以下の UI が表示されます。</p><ul><li>受信したコメント一覧</li><li>コメント入力欄</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>画面下側の開発者ツール (devtool) 部分は、画面右上のハンバーガーボタン (<img src="'+o+'" style="display:inline;vertical-align:middle;" width="20/">) を押すと表示されます。</p></div><p>コメント入力欄では、コメント本文とコマンドとして任意の文字列を指定できます。 &quot;Send&quot; ボタンを押すと、送信者タイプ (Anonymous, Named, Broadcaster) に応じた内容でコメントが送信されます。</p><table tabindex="0"><thead><tr><th style="text-align:center;">送信者<br>タイプ</th><th style="text-align:center;">意味合い</th><th style="text-align:left;">詳細</th></tr></thead><tbody><tr><td style="text-align:center;">Anonymous</td><td style="text-align:center;">「なふだ機能」OFFで送信</td><td style="text-align:left;">ゲームに送られるコメント通知イベントの <code>isAnonymous</code> を <code>true</code> 、<code>userID</code> をランダムな文字列にする</td></tr><tr><td style="text-align:center;">Named</td><td style="text-align:center;">「なふだ機能」ONで送信</td><td style="text-align:left;">ゲームに送られるコメント通知イベントの <code>isAnonymous</code> を <code>false</code> に、 <code>userID</code> をそのウィンドウのプレイヤー ID にする</td></tr><tr><td style="text-align:center;">Broadcaster</td><td style="text-align:center;">放送者コメントとして送信</td><td style="text-align:left;">ゲームに送られるコメント通知イベントの <code>isAnonymous</code> を <code>false</code> に、 <code>userID</code> と <code>vpos</code> を <code>undefined</code> にする</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP 放送者コメントの確認</p><p>serve が <code>--target-service nicolive</code> (または <code>-s nicolive</code>) で起動されている場合、 最初に開かれたウィンドウが放送者役として扱われます (<a href="./broadcaster.html">詳細</a>)。 このウィンドウの送信者タイプは Broadcaster に固定されます。 また他のウィンドウでは Broadcaster を選択できなくなります。</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Comment の画面は、 game.json の <code>environment.external.namagameComment</code> フィールドがあるゲームでのみ有効になります。</p></div><h3 id="send-template" tabindex="-1">テンプレートからの送信 <a class="header-anchor" href="#send-template" aria-label="Permalink to &quot;テンプレートからの送信 {#send-template}&quot;">​</a></h3><p>動作確認中に都度入力する手間を省くため、事前にコメントのテンプレートを作成しておくことができます。</p>',9),m=e("img",{src:c,style:{border:"1px solid #e8e8e8","border-radius":"4px"}},null,-1),y=s(`<p>テンプレートの設定がある場合、コメント入力欄の上に &quot;Template&quot; 列が表示されます。 この列のボタン押下で指定したコメント (複数可) を送信できます。</p><p>テンプレートは、 sandbox.config.js の <code>external.namagameComment.templates</code> フィールドで指定します。 次の例は、「あいうえお」というコメントが 3 度送られるテンプレート &quot;あいうえおx3&quot; を記載した sandbox.config.js です。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  external: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    namagameComment: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      templates: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // (テンプレート名): (内容) の形式で指定</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;あいうえおx3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // コメントの内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // userID: pid1 が非匿名で「あいうえお」とコメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pid1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 最初のコメントの 300 フレーム後、放送者コメントとして「かきくけこ」とコメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;かきくけこ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 最初のコメントの 1000 フレーム後、匿名で「らりるれろ」とコメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;らりるれろ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ghijkl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p><code>comments</code> の各要素には、コメント情報に存在するフィールドをすべて指定できます (参考: <a href="#spec-event">#コメント通知イベント</a>) 。 さらに <code>frame</code> プロパティで、送信開始から何フレーム後に送信するかも指定できます (指定しなければ直前のコメントと同時に送られます) 。</p><p>そのほかテンプレートでは、特定タイミングでの自動送信も指定できます。 詳細は <a href="#spec-templates">#コメントテンプレート</a> の節を参照してください。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>sandbox.config.js は akashic serve/sandbox コマンドの設定ファイルです。 game.json のあるディレクトリにこの名前のファイルを置くと、起動時に自動的に認識されます。 詳細は <a href="./../../reference/manifest/sandbox-config.html">リファレンス » 設定ファイル » sandbox.config.js の仕様</a> を参照してください。</p></div><h2 id="spec" tabindex="-1">仕様 <a class="header-anchor" href="#spec" aria-label="Permalink to &quot;仕様 {#spec}&quot;">​</a></h2><p>このページの以下の部分は、各 API やデータの仕様をまとめています。</p><h3 id="plugin-api" tabindex="-1">プラグインAPI <a class="header-anchor" href="#plugin-api" aria-label="Permalink to &quot;プラグインAPI {#plugin-api}&quot;">​</a></h3><p>namagameComment プラグインは、 <code>start()</code>, <code>stop()</code> の 2 つのメソッドを持ちます。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>このプラグインはインスタンスによって存在しない場合があります。 各メソッドは <code>?.</code> 演算子などを使って、<strong>常に存在を確認してから呼び出してください</strong> 。</p></div><h4 id="api-start" tabindex="-1">start() <a class="header-anchor" href="#api-start" aria-label="Permalink to &quot;start() {#api-start}&quot;">​</a></h4><p><code>start()</code> はコメントの受信を開始します。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.namagameComment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(opts, callback)</span></span></code></pre></div><p>引数 <code>opts</code> はコメント受信のオプション、 <code>callback</code> は完了時に呼び出されるコールバックです。 ただしどちらも省略できます。</p><p>第一引数 <code>opts</code> は将来の拡張に備えたもので、現在のところ未使用です。 (型定義上は <code>null</code> や <code>{}</code> を渡せるようになっています)</p><p>第二引数 <code>callback</code> は、 <code>start()</code> の完了時に呼び出される関数です。 呼び出しの際、以下の引数が与えられます。</p><table tabindex="0"><thead><tr><th style="text-align:center;">引数</th><th style="text-align:center;">型</th><th style="text-align:left;">値</th></tr></thead><tbody><tr><td style="text-align:center;">第一引数 (<code>err</code>)</td><td style="text-align:center;"><code>Error</code> または <code>null</code></td><td style="text-align:left;">名前取得に成功した場合、 <code>null</code> 。<br>失敗した場合、対応する <code>Error</code> 。</td></tr></tbody></table><p>完了を待つ必要がなく、エラーに対して行う処理がない場合は、 <code>callback</code> を省略することができます。</p><p><code>start()</code> の戻り値は <code>undefined</code> です。</p><h4 id="api-stop" tabindex="-1">stop() <a class="header-anchor" href="#api-stop" aria-label="Permalink to &quot;stop() {#api-stop}&quot;">​</a></h4><p><code>stop()</code> はコメントの受信を停止します。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g.game.external.namagameComment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>引数はありません。戻り値は <code>undefined</code> です。</p><h3 id="spec-event" tabindex="-1">コメント通知イベント <a class="header-anchor" href="#spec-event" aria-label="Permalink to &quot;コメント通知イベント {#spec-event}&quot;">​</a></h3><p>配信上のコメントは、 <strong>コメント通知イベント</strong> としてゲームに与えられます。 コメント通知イベントは、次の条件を満たすイベント <code>ev</code> です。</p><ul><li><code>g.MessageEvent</code> である</li><li><code>ev.player.id</code> (送信者) が <code>&quot;:akashic&quot;</code> である</li><li><code>ev.data</code> が次の要素を持つオブジェクトである</li></ul><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:left;">内容</th></tr></thead><tbody><tr><td style="text-align:center;"><code>type</code></td><td style="text-align:left;"><code>&quot;namagame:comment&quot;</code> という文字列</td></tr><tr><td style="text-align:center;"><code>comments</code></td><td style="text-align:left;">コメント情報の配列</td></tr></tbody></table><p><code>g.MessageEvent</code> の <code>data.type</code> を確認することで、そのイベントがコメント通知イベントかどうか判別することができます。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>data</code> プロパティは <code>undefined</code> や <code>null</code> でもありうることに注意してください。 <code>data</code> が <code>null</code> などでも動作する形で判定を行う必要があります。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ev.data?.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;namagame:comment&quot;</span></span></code></pre></div></div><p>コメント通知イベントの <code>comments</code> は、コメント情報の配列です。 <strong>コメント情報</strong> は、次のプロパティを持つオブジェクトです。</p><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:center;">型</th><th style="text-align:left;">内容</th></tr></thead><tbody><tr><td style="text-align:center;"><code>comment</code></td><td style="text-align:center;"><code>string</code></td><td style="text-align:left;">コメント本文。</td></tr><tr><td style="text-align:center;"><code>command</code></td><td style="text-align:center;"><code>string</code> または <code>undefined</code></td><td style="text-align:left;">コメントのコマンド指定。(参考: <a href="https://qa.nicovideo.jp/faq/show/6767#m" target="_blank" rel="noreferrer">生放送プレーヤー操作方法</a>) ない場合は <code>undefined</code> 。</td></tr><tr><td style="text-align:center;"><code>userID</code></td><td style="text-align:center;"><code>string</code> または <code>undefined</code></td><td style="text-align:left;">コメントを送信したユーザ ID 。「なふだ機能」が OFF (匿名) のコメントの場合、ハッシュ化されたユーザ ID。放送者コメントの場合のみ <code>undefined</code> 。</td></tr><tr><td style="text-align:center;"><code>isAnonymous</code></td><td style="text-align:center;"><code>boolean</code></td><td style="text-align:left;">匿名のコメント (「なふだ機能」が OFF) かどうか。放送者コメントの場合は <code>false</code> 。</td></tr><tr><td style="text-align:center;"><code>vpos</code></td><td style="text-align:center;"><code>number</code> または <code>undefined</code></td><td style="text-align:left;">コメントの受信タイミング。放送開始からのセンチ秒の経過時刻。放送者コメントの場合のみ <code>undefined</code> 。</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP コメントの分類</p><p>すなわちコメントは次のようなコードで振り分けることができます。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (comment.userID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 放送者のコメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 視聴者のコメント</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // さらに匿名かどうかで処理を分けるなら</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (comment.isAnonymous) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 視聴者の匿名コメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 視聴者の非匿名コメント</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div><div class="warning custom-block"><p class="custom-block-title">注意: userID とプレイヤー ID</p><p>コメント情報の <code>userID</code> は、ゲーム内のプレイヤー ID (<code>g.game.selfId</code> や、イベントの <code>player.id</code> プロパティで得られる値) と比較することができます。</p><p>しかしニコニコ生放送のコメントは、デフォルトでは匿名 (「なふだ機能」が OFF) になっています (参考: <a href="https://qa.nicovideo.jp/faq/show/21148" target="_blank" rel="noreferrer">なふだ機能とは</a>) 。 少なくないコメントにおいて <code>userID</code> が匿名化された値になっている可能性が高く、 <strong>コメントの送信者とゲームのプレイヤーを紐づけることは必ずしもできない</strong> 点に注意してください (放送者コメントを除き) 。</p><p>「ゲームに参加しているプレイヤーのコメント」を特に識別したい場合は、 「ゲーム内で &quot;なふだ機能&quot; を ON にするよう求める」 「メインゲーム開始前にプレイヤーにテストコメントを送信させて確認する」など、ゲーム側での対応が必要になります。</p></div><div class="info custom-block"><p class="custom-block-title">補足: vpos と受信順</p><p>ゲームがコメント通知イベントを <strong>受信する順</strong> は、vpos の値と厳密に対応する保証はありません。 いくらか前後する可能性があります。</p><p>コメントリスト (配信画面のコメント一覧) の表示順にできるだけ合わせて順序を判定したい場合は、 <code>vpos</code> の値で比較してください。 ただし <code>vpos</code> で比較してもなお、センチ秒 (1/100 秒) 単位で同一時刻のコメントの順序は保証されません。 そもそも放送者コメントは <code>vpos</code> が与えられないこともあり、コメントリストの表示順を完全に再現することはできないものとして扱ってください。</p></div><h3 id="spec-templates" tabindex="-1">コメントテンプレート <a class="header-anchor" href="#spec-templates" aria-label="Permalink to &quot;コメントテンプレート {#spec-templates}&quot;">​</a></h3><div class="danger custom-block"><p class="custom-block-title">UNDER REVIEW</p><p>この節は仕様確定後に「リファレンス」ページに移動されます。</p></div><p>sandbox.config.js の <code>external.namagameComment.templates</code> は、コメントテンプレートのテーブルです。 存在する場合、<code>templates</code> はオブジェクトでなければなりません。 <code>templates</code> の各キーはテンプレート名、値は対応するコメントテンプレートです。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// sandbox.config.js の external.namagameComment.templates の構造</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    namagameComment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      templates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&lt;テンプレート名A&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* コメントテンプレート */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&lt;テンプレート名B&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* コメントテンプレート */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>コメントテンプレートは、次の要素を持つオブジェクトです。</p><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:center;">型</th><th style="text-align:center;">省略可否</th><th style="text-align:left;">説明</th></tr></thead><tbody><tr><td style="text-align:center;"><code>comments</code></td><td style="text-align:center;">配列</td><td style="text-align:center;">必須</td><td style="text-align:left;">送信するコメント内容の指定。</td></tr><tr><td style="text-align:center;"><code>startBy</code></td><td style="text-align:center;"><code>&quot;playStart&quot;</code>,<br><code>&quot;pluginStart&quot;</code>,<br>または <code>&quot;manual&quot;</code></td><td style="text-align:center;">省略可</td><td style="text-align:left;">自動送信の開始タイミング (後述)。<br>省略された場合、 <code>&quot;manual&quot;</code> 。</td></tr></tbody></table><p><code>comments</code> はコメント内容を指定するオブジェクトの配列です。その各要素は次のプロパティを持ちます。</p><table tabindex="0"><thead><tr><th style="text-align:center;">プロパティ名</th><th style="text-align:center;">型</th><th style="text-align:center;">省略可否</th><th style="text-align:left;">説明</th></tr></thead><tbody><tr><td style="text-align:center;"><code>comment</code>,<br><code>command</code>,<br><code>userID</code>,<br><code>isAnonymous</code>,<br><code>vpos</code></td><td style="text-align:center;">-</td><td style="text-align:center;">省略可</td><td style="text-align:left;"><a href="#spec-event">コメント情報</a> の同名のプロパティに対応。</td></tr><tr><td style="text-align:center;"><code>frame</code></td><td style="text-align:center;"><code>number</code></td><td style="text-align:center;">省略可</td><td style="text-align:left;">送信タイミング。単位はフレーム。<br>値の解釈は <code>startBy</code> によって決まる。<br>省略された場合、この要素が配列の最初の要素なら <code>0</code> 、それ以外は直前の要素のそれと同値。</td></tr></tbody></table><p><code>startBy</code> は自動送信の有無・タイミングを指定します。値は次のいずれかです。</p><table tabindex="0"><thead><tr><th style="text-align:center;"><code>startBy</code></th><th style="text-align:left;">自動<br>送信</th><th style="text-align:left;"><code>frame</code> の解釈 (送信タイミング)</th></tr></thead><tbody><tr><td style="text-align:center;"><code>&quot;playStart&quot;</code></td><td style="text-align:left;">する</td><td style="text-align:left;">ゲーム開始からの経過フレーム数。</td></tr><tr><td style="text-align:center;"><code>&quot;pluginStart&quot;</code></td><td style="text-align:left;">する</td><td style="text-align:left;">namagameComment プラグインの <code>start()</code> 呼び出しからの経過フレーム数。</td></tr><tr><td style="text-align:center;"><code>&quot;manual&quot;</code></td><td style="text-align:left;">しない</td><td style="text-align:left;">UI から送信 (して、serve のサーバに到達) してからの経過フレーム数。</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>startBy</code> の指定に関わらず、全てのコメントテンプレートは serve の UI からボタンで送信できます。</p></div><p>次のコードは、三種類のコメントテンプレートを定義した sandbox.config.js の例です。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  external: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    namagameComment: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      templates: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // userID: &quot;pid1&quot; が非匿名で「あいうえお」と送信するテンプレート。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pid1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // コマンド &quot;shita red&quot; つきの放送者コメント「あいうえお」と匿名コメント「かきくけこ」を送信するテンプレート。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;あいうえお＆かきくけこ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;あいうえお&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, command: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;shita red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;かきくけこ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;efgefg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, command: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;shita red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // userID: &quot;pid1&quot; と匿名 (「なふだ機能」OFF) の二人が</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 200 フレーム間隔で「わこつ」と送信するテンプレート。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // namagameComment プラグインの \`start()\` 後 100 フレーム目から自動送信。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;自動送信:わこつ×3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          startBy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pluginStart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          comments: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;わこつ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pid1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, command: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;わこつ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abcabc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { frame: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;わこつ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userID: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cdecde&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, isAnonymous: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div>`,48);function u(b,A,v,F,C,x){const a=p("CaptionedFigure");return h(),l("div",null,[r,i(a,{caption:"開発者ツールの Niconico タブ (画面下側) を開いた akashic serve"},{default:t(()=>[E]),_:1}),g,i(a,{caption:"テンプレート設定がある場合の画面"},{default:t(()=>[m]),_:1}),y])}const D=n(k,[["render",u]]);export{f as __pageData,D as default};
