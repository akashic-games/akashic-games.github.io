import{d as b,p as v,g as w,_ as N,r as u,o as n,c as r,h as p,a as o,n as C,l as _,v as y,b as m,i as k,j as B}from"./index-ae7f187b.js";import{D as P,A as S,G as T,u as F,a as G,c as D,b as O}from"./GameController-d2f025de.js";const J=b({components:{DownloadButton:P,AkashicEditor:S,GameController:T},props:{gameJsonUri:{type:String,required:!0},autoplay:{type:Boolean,default:!1},name:{type:String,required:!0},showDownloadButton:{type:Boolean,default:!0},showTab:{type:Boolean,default:!0}},setup(e){const a=F(),i=G();v(D,a),v(O,i);const t=w({currentPageTabName:"code",ready:e.autoplay,processingAsZip:!1}),l=async()=>{await a.fetchPseudoFilesFromUri(e.gameJsonUri);const s=a.pseudoFiles.find(({assetType:d})=>d==="game.json");i.run(a.generateGameJSON(s&&s.editorType==="text"?JSON.parse(s.value):void 0),a.pseudoFiles,a.assetBase),t.currentPageTabName="game",t.ready=!0},g=s=>{t.currentPageTabName=s};return e.autoplay&&l(),{props:e,state:t,gameConfs:a,handleClickOverlay:l,changeCurrentPageTab:g}}});const f=e=>(k("data-v-40123d27"),e=e(),B(),e),A={class:"snippet-page-container"},E=f(()=>o("span",{class:"text"},"コードを実行",-1)),$=f(()=>o("span",{class:"icon"},[o("i",{class:"material-icons md-120"},"play_arrow")],-1)),I=[E,$],R={key:1,class:"container-page-tab"},U={class:"container-agv"},V={class:"container-editor"},j={key:2,class:"container-download"};function q(e,a,i,t,l,g){const s=u("GameController"),d=u("AkashicEditor"),h=u("DownloadButton");return n(),r("div",A,[e.state.ready?p("",!0):(n(),r("div",{key:0,class:"container-overlay pointer",onClick:a[0]||(a[0]=(...c)=>e.handleClickOverlay&&e.handleClickOverlay(...c))},I)),e.props.showTab?(n(),r("div",R,[o("ul",null,[o("li",{class:C(["page-tab",{active:e.state.currentPageTabName==="code"}])},[o("a",{onClick:a[1]||(a[1]=c=>e.changeCurrentPageTab("code"))},"CODE")],2),o("li",{class:C(["page-tab",{active:e.state.currentPageTabName==="game"}])},[o("a",{onClick:a[2]||(a[2]=c=>e.changeCurrentPageTab("game"))},"GAME")],2)])])):p("",!0),_(o("div",U,[m(s,{ref:"gameContollerRef"},null,512)],512),[[y,e.state.currentPageTabName==="game"]]),_(o("div",V,[m(d,{pseudoFiles:e.gameConfs.pseudoFiles},null,8,["pseudoFiles"])],512),[[y,e.state.currentPageTabName==="code"]]),e.props.showDownloadButton?(n(),r("div",j,[m(h,{pseudoFiles:e.gameConfs.pseudoFiles,name:e.props.name+"."+Date.now()},null,8,["pseudoFiles","name"])])):p("",!0)])}const M=N(J,[["render",q],["__scopeId","data-v-40123d27"],["__file","SnippetPage.vue"]]);export{M as default};
